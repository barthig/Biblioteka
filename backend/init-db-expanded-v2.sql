\set ON_ERROR_STOP on
CREATE EXTENSION IF NOT EXISTS vector;
\echo 'Creating schema and demo data for Biblioteka...'
-- ============================================
-- Pełna struktura bazy danych systemu bibliotecznego
-- Data aktualizacji: 2025-12-13 12:00
-- System: Biblioteka - System Zarządzania Biblioteką
-- Wersja: 2.1.0
-- 
-- FUNKCJONALNOŚCI:
-- - System ocen książek (rating)
-- - System feedbacku rekomendacji (recommendation_feedback)
-- - Kolekcje kuratorskie (book_collection)
-- - Onboarding użytkownika (preferred_categories)
-- - Szczegółowy profil użytkownika (pesel, card_number, address)
-- - System kar finansowych (fine)
-- - Audyt aktywności (audit_logs)
-- - Wypożyczenia z przedłużeniami (loan)
-- - System rezerwacji (reservation)
-- 
-- OPTYMALIZACJE:
-- - Redis cache (Doctrine metadata, queries, results)
-- - OPcache (PHP bytecode caching)
-- - Explicit SEQUENCE strategy (allocationSize=1)
-- - Batch loading dla rating statistics
-- ============================================

-- ============================================
-- CZYSZCZENIE POPRZEDNIEJ STRUKTURY
-- ============================================

DROP TABLE IF EXISTS recommendation_feedback CASCADE;
DROP TABLE IF EXISTS user_book_interaction CASCADE;
DROP TABLE IF EXISTS collection_books CASCADE;
DROP TABLE IF EXISTS book_collection CASCADE;
DROP TABLE IF EXISTS rating CASCADE;
DROP TABLE IF EXISTS weeding_record CASCADE;
DROP TABLE IF EXISTS supplier CASCADE;
DROP TABLE IF EXISTS registration_token CASCADE;
DROP TABLE IF EXISTS acquisition_expense CASCADE;
DROP TABLE IF EXISTS acquisition_order CASCADE;
DROP TABLE IF EXISTS acquisition_budget CASCADE;
DROP TABLE IF EXISTS review CASCADE;
DROP TABLE IF EXISTS system_setting CASCADE;
DROP TABLE IF EXISTS staff_role CASCADE;
DROP TABLE IF EXISTS notification_log CASCADE;
DROP TABLE IF EXISTS integration_config CASCADE;
DROP TABLE IF EXISTS fine CASCADE;
DROP TABLE IF EXISTS reservation CASCADE;
DROP TABLE IF EXISTS loan CASCADE;
DROP TABLE IF EXISTS backup_record CASCADE;
DROP TABLE IF EXISTS audit_logs CASCADE;
DROP TABLE IF EXISTS announcement CASCADE;
DROP TABLE IF EXISTS favorite CASCADE;
DROP TABLE IF EXISTS refresh_token CASCADE;
DROP TABLE IF EXISTS book_digital_asset CASCADE;
DROP TABLE IF EXISTS book_copy CASCADE;
DROP TABLE IF EXISTS book_category CASCADE;
DROP TABLE IF EXISTS book CASCADE;
DROP TABLE IF EXISTS category CASCADE;
DROP TABLE IF EXISTS age_range CASCADE;
DROP TABLE IF EXISTS author CASCADE;
DROP TABLE IF EXISTS app_user CASCADE;
DROP SEQUENCE IF EXISTS refresh_token_id_seq CASCADE;

-- ============================================
-- TABELE GŁÓWNE
-- ============================================

-- Tabela: system_setting - Ustawienia systemowe
CREATE TABLE system_setting (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    setting_key VARCHAR(120) NOT NULL,
    setting_value TEXT NOT NULL,
    value_type VARCHAR(16) NOT NULL,
    description VARCHAR(255) DEFAULT NULL,
    created_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    updated_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    PRIMARY KEY(id)
);
CREATE UNIQUE INDEX UNIQ_7307C40B5FA1E697 ON system_setting (setting_key);

-- Tabela: app_user - Użytkownicy systemu
CREATE TABLE app_user (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    email VARCHAR(180) NOT NULL,
    name VARCHAR(255) NOT NULL,
    roles JSON NOT NULL,
    password VARCHAR(255) NOT NULL,
    phone_number VARCHAR(30) DEFAULT NULL,
    address_line VARCHAR(255) DEFAULT NULL,
    city VARCHAR(120) DEFAULT NULL,
    postal_code VARCHAR(12) DEFAULT NULL,
    pesel VARCHAR(11) DEFAULT NULL,
    card_number VARCHAR(20) DEFAULT NULL,
    blocked BOOLEAN DEFAULT false NOT NULL,
    verified BOOLEAN DEFAULT false NOT NULL,
    verified_at TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL,
    pending_approval BOOLEAN DEFAULT false NOT NULL,
    membership_group VARCHAR(64) DEFAULT 'standard' NOT NULL,
    age_range_code VARCHAR(24) DEFAULT NULL,
    loan_limit INT DEFAULT 5 NOT NULL,
    blocked_reason VARCHAR(255) DEFAULT NULL,
    created_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    updated_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    privacy_consent_at TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL,
    newsletter_subscribed BOOLEAN DEFAULT true NOT NULL,
    card_expiry TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL,
    account_status VARCHAR(50) DEFAULT NULL,
    keep_history BOOLEAN DEFAULT false NOT NULL,
    email_loans BOOLEAN DEFAULT true NOT NULL,
    email_reservations BOOLEAN DEFAULT true NOT NULL,
    email_fines BOOLEAN DEFAULT true NOT NULL,
    email_announcements BOOLEAN DEFAULT false NOT NULL,
    preferred_contact VARCHAR(20) DEFAULT NULL,
    default_branch VARCHAR(50) DEFAULT NULL,
    theme VARCHAR(20) DEFAULT NULL,
    preferred_categories JSON DEFAULT NULL,
    onboarding_completed BOOLEAN DEFAULT false NOT NULL,
    font_size VARCHAR(20) DEFAULT NULL,
    language VARCHAR(5) DEFAULT NULL,
    pin VARCHAR(4) DEFAULT NULL,
    taste_embedding vector(1536) DEFAULT NULL,
    PRIMARY KEY(id)
);

CREATE UNIQUE INDEX UNIQ_88BDF3E9E7927C74 ON app_user (email);

-- Tabela: refresh_token - tokeny odswiezania JWT
CREATE SEQUENCE refresh_token_id_seq INCREMENT BY 1 MINVALUE 1 START 1;

CREATE TABLE refresh_token (
    id INT NOT NULL DEFAULT nextval('refresh_token_id_seq'),
    user_id INT NOT NULL,
    token VARCHAR(255) NOT NULL,
    token_hash VARCHAR(64) NOT NULL,
    expires_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    created_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    ip_address VARCHAR(45) DEFAULT NULL,
    user_agent VARCHAR(255) DEFAULT NULL,
    is_revoked BOOLEAN NOT NULL DEFAULT FALSE,
    revoked_at TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL,
    PRIMARY KEY (id),
    CONSTRAINT fk_refresh_token_user FOREIGN KEY (user_id)
        REFERENCES app_user (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE
);

CREATE UNIQUE INDEX uniq_refresh_token ON refresh_token (token);
CREATE UNIQUE INDEX uniq_refresh_token_hash ON refresh_token (token_hash);
CREATE INDEX idx_refresh_token_user ON refresh_token (user_id);

COMMENT ON COLUMN refresh_token.expires_at IS '(DC2Type:datetime_immutable)';
COMMENT ON COLUMN refresh_token.created_at IS '(DC2Type:datetime_immutable)';
COMMENT ON COLUMN refresh_token.revoked_at IS '(DC2Type:datetime_immutable)';

-- Tabela: author - Autorzy książek
CREATE TABLE author (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    name VARCHAR(255) NOT NULL,
    PRIMARY KEY(id)
);

CREATE UNIQUE INDEX UNIQ_BDAFD8C85E237E06 ON author (name);

-- Tabela: category - Kategorie książek
CREATE TABLE category (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    name VARCHAR(120) NOT NULL,
    PRIMARY KEY(id)
);



-- Tabela: age_range - Przedziały wiekowe (do rekomendacji)
CREATE TABLE age_range (
    code VARCHAR(24) NOT NULL,
    label VARCHAR(80) NOT NULL,
    min_age SMALLINT NOT NULL,
    max_age SMALLINT DEFAULT NULL,
    description TEXT DEFAULT NULL,
    PRIMARY KEY(code)
);

CREATE UNIQUE INDEX UNIQ_64C19C15E237E06 ON category (name);

-- Tabela: book - Książki
CREATE TABLE book (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    title VARCHAR(255) NOT NULL,
    isbn VARCHAR(20) DEFAULT NULL,
    copies INT NOT NULL,
    total_copies INT NOT NULL,
    storage_copies INT NOT NULL,
    open_stack_copies INT NOT NULL,
    description TEXT DEFAULT NULL,
    embedding vector(1536) DEFAULT NULL,
    search_vector tsvector GENERATED ALWAYS AS (to_tsvector('simple', coalesce(title, '') || ' ' || coalesce(description, ''))) STORED,
    publisher VARCHAR(180) DEFAULT NULL,
    publication_year SMALLINT DEFAULT NULL,
    resource_type VARCHAR(60) DEFAULT NULL,
    signature VARCHAR(60) DEFAULT NULL,
    target_age_group VARCHAR(24) DEFAULT NULL,
    created_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    author_id INT NOT NULL,
    PRIMARY KEY(id)
);

CREATE INDEX IDX_CBE5A331F675F31B ON book (author_id);
CREATE INDEX book_search_vector_idx ON book USING GIN (search_vector);

-- Tabela: book_category - Relacja wiele do wielu między książkami a kategoriami
CREATE TABLE book_category (
    book_id INT NOT NULL,
    category_id INT NOT NULL,
    PRIMARY KEY(book_id, category_id)
);

CREATE INDEX IDX_1FB30F9816A2B381 ON book_category (book_id);
CREATE INDEX IDX_1FB30F9812469DE2 ON book_category (category_id);

-- Tabela: book_copy - Egzemplarze książek
CREATE TABLE book_copy (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    inventory_code VARCHAR(60) NOT NULL,
    status VARCHAR(20) NOT NULL,
    location VARCHAR(120) DEFAULT NULL,
    access_type VARCHAR(30) NOT NULL,
    condition_state VARCHAR(120) DEFAULT NULL,
    created_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    updated_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    book_id INT NOT NULL,
    PRIMARY KEY(id)
);

CREATE UNIQUE INDEX UNIQ_5427F08A3DB3FFB6 ON book_copy (inventory_code);
CREATE INDEX IDX_5427F08A16A2B381 ON book_copy (book_id);

-- Tabela: book_digital_asset - Zasoby cyfrowe książek
CREATE TABLE book_digital_asset (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    label VARCHAR(255) NOT NULL,
    original_filename VARCHAR(255) NOT NULL,
    mime_type VARCHAR(100) NOT NULL,
    size INT NOT NULL,
    storage_name VARCHAR(255) NOT NULL,
    created_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    book_id INT NOT NULL,
    PRIMARY KEY(id)
);

CREATE UNIQUE INDEX UNIQ_817C37D0570EB513 ON book_digital_asset (storage_name);
CREATE INDEX IDX_817C37D016A2B381 ON book_digital_asset (book_id);

-- ============================================
-- SYSTEM OCEN I REKOMENDACJI
-- ============================================

-- Tabela: rating - Oceny książek
CREATE TABLE rating (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    rating SMALLINT NOT NULL,
    review TEXT DEFAULT NULL,
    created_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    updated_at TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL,
    user_id INT NOT NULL,
    book_id INT NOT NULL,
    PRIMARY KEY(id)
);

CREATE INDEX IDX_D8892622A76ED395 ON rating (user_id);
CREATE INDEX IDX_D889262216A2B381 ON rating (book_id);
CREATE UNIQUE INDEX rating_user_book_unique ON rating (user_id, book_id);

-- Tabela: recommendation_feedback - Feedback użytkownika na rekomendacje
CREATE TABLE recommendation_feedback (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    feedback_type VARCHAR(20) NOT NULL,
    created_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    user_id INT NOT NULL,
    book_id INT NOT NULL,
    PRIMARY KEY(id)
);

CREATE INDEX IDX_FEED_USER ON recommendation_feedback (user_id);
CREATE INDEX IDX_FEED_BOOK ON recommendation_feedback (book_id);
CREATE UNIQUE INDEX feedback_user_book_unique ON recommendation_feedback (user_id, book_id);

-- Tabela: book_collection - Kolekcje kuratorskie
CREATE TABLE book_collection (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    name VARCHAR(255) NOT NULL,
    description TEXT DEFAULT NULL,
    featured BOOLEAN NOT NULL,
    display_order INT NOT NULL,
    created_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    updated_at TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL,
    curated_by_id INT NOT NULL,
    PRIMARY KEY(id)
);

CREATE INDEX IDX_63E02F81436FBB41 ON book_collection (curated_by_id);

-- Tabela: collection_books - Relacja wiele do wielu między kolekcjami a książkami
CREATE TABLE collection_books (
    book_collection_id INT NOT NULL,
    book_id INT NOT NULL,
    PRIMARY KEY(book_collection_id, book_id)
);

CREATE INDEX IDX_DE392C134A06EF1 ON collection_books (book_collection_id);
CREATE INDEX IDX_DE392C116A2B381 ON collection_books (book_id);

-- ============================================
-- WYPOŻYCZENIA I REZERWACJE
-- ============================================

-- Tabela: loan - Wypożyczenia
CREATE TABLE loan (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    borrowed_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    due_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    returned_at TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL,
    extensions_count INT NOT NULL,
    last_extended_at TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL,
    book_id INT NOT NULL,
    book_copy_id INT DEFAULT NULL,
    user_id INT NOT NULL,
    PRIMARY KEY(id)
);

CREATE INDEX IDX_C5D30D0316A2B381 ON loan (book_id);
CREATE INDEX IDX_C5D30D033B550FE4 ON loan (book_copy_id);
CREATE INDEX IDX_C5D30D03A76ED395 ON loan (user_id);

-- Tabela: reservation - Rezerwacje
CREATE TABLE reservation (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    status VARCHAR(20) NOT NULL,
    reserved_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    expires_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    fulfilled_at TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL,
    cancelled_at TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL,
    expired_at TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL,
    book_id INT NOT NULL,
    book_copy_id INT DEFAULT NULL,
    user_id INT NOT NULL,
    PRIMARY KEY(id)
);

CREATE INDEX IDX_42C8495516A2B381 ON reservation (book_id);
CREATE INDEX IDX_42C849553B550FE4 ON reservation (book_copy_id);
CREATE INDEX IDX_42C84955A76ED395 ON reservation (user_id);

-- Tabela: review - Oceny i opinie
CREATE TABLE review (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    book_id INT NOT NULL,
    user_id INT NOT NULL,
    rating SMALLINT NOT NULL,
    comment TEXT DEFAULT NULL,
    created_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    updated_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    PRIMARY KEY(id)
);

CREATE INDEX IDX_794381C616A2B381 ON review (book_id);
CREATE INDEX IDX_794381C6A76ED395 ON review (user_id);
CREATE UNIQUE INDEX review_user_book_unique ON review (user_id, book_id);

-- Tabela: fine - Kary/grzywny
CREATE TABLE fine (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    amount NUMERIC(8, 2) NOT NULL,
    currency VARCHAR(3) NOT NULL,
    reason VARCHAR(255) NOT NULL,
    created_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    paid_at TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL,
    loan_id INT NOT NULL,
    PRIMARY KEY(id)
);

CREATE INDEX IDX_BEA95492CE73868F ON fine (loan_id);

-- ============================================
-- MODUŁ UŻYTKOWNIKÓW
-- ============================================

-- Tabela: favorite - Ulubione książki użytkowników
CREATE TABLE favorite (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    created_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    user_id INT NOT NULL,
    book_id INT NOT NULL,
    PRIMARY KEY(id)
);

CREATE INDEX IDX_68C58ED9A76ED395 ON favorite (user_id);
CREATE INDEX IDX_68C58ED916A2B381 ON favorite (book_id);
CREATE UNIQUE INDEX favorite_user_book_unique ON favorite (user_id, book_id);

-- Table: user_book_interaction - Interactions for recommendations
CREATE TABLE user_book_interaction (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    user_id INT NOT NULL,
    book_id INT NOT NULL,
    type VARCHAR(20) NOT NULL,
    rating SMALLINT DEFAULT NULL,
    created_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    PRIMARY KEY(id)
);

CREATE INDEX user_book_interaction_user_idx ON user_book_interaction (user_id);

-- Tabela: registration_token - Tokeny rejestracyjne
CREATE TABLE registration_token (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    token VARCHAR(96) NOT NULL,
    created_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    expires_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    used_at TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL,
    user_id INT NOT NULL,
    PRIMARY KEY(id)
);

CREATE UNIQUE INDEX UNIQ_D09D01D35F37A13B ON registration_token (token);
CREATE INDEX IDX_D09D01D3A76ED395 ON registration_token (user_id);

-- ============================================
-- MODUŁ ADMINISTRACYJNY
-- ============================================

-- Tabela: announcement - Ogłoszenia
CREATE TABLE announcement (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    title VARCHAR(255) NOT NULL,
    content TEXT NOT NULL,
    location VARCHAR(255) DEFAULT NULL,
    type VARCHAR(20) NOT NULL,
    status VARCHAR(20) NOT NULL,
    is_pinned BOOLEAN NOT NULL,
    show_on_homepage BOOLEAN NOT NULL,
    created_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    updated_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    published_at TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL,
    expires_at TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL,
    event_at TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL,
    target_audience JSON DEFAULT NULL,
    created_by_id INT NOT NULL,
    PRIMARY KEY(id)
);

CREATE INDEX IDX_4DB9D91CB03A8386 ON announcement (created_by_id);

-- Tabela: audit_logs - Logi audytowe
CREATE TABLE audit_logs (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    entity_type VARCHAR(50) NOT NULL,
    entity_id INT DEFAULT NULL,
    action VARCHAR(20) NOT NULL,
    ip_address VARCHAR(45) DEFAULT NULL,
    old_values TEXT DEFAULT NULL,
    new_values TEXT DEFAULT NULL,
    description TEXT DEFAULT NULL,
    created_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    user_id INT DEFAULT NULL,
    PRIMARY KEY(id)
);

CREATE INDEX idx_audit_entity ON audit_logs (entity_type, entity_id);
CREATE INDEX idx_audit_action ON audit_logs (action);
CREATE INDEX idx_audit_user ON audit_logs (user_id);
CREATE INDEX idx_audit_created ON audit_logs (created_at);

-- Tabela: backup_record - Rekordy kopii zapasowych
CREATE TABLE backup_record (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    file_name VARCHAR(190) NOT NULL,
    file_path VARCHAR(255) NOT NULL,
    file_size INT NOT NULL,
    status VARCHAR(32) NOT NULL,
    created_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    initiated_by VARCHAR(120) DEFAULT NULL,
    PRIMARY KEY(id)
);

-- ============================================
-- MODUŁ INTEGRACJI
-- ============================================

-- Tabela: integration_config - Konfiguracje integracji
CREATE TABLE integration_config (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    name VARCHAR(160) NOT NULL,
    provider VARCHAR(120) NOT NULL,
    enabled BOOLEAN NOT NULL,
    settings JSON NOT NULL,
    last_status VARCHAR(32) NOT NULL,
    last_tested_at TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL,
    created_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    updated_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    PRIMARY KEY(id)
);

-- Tabela: notification_log - Logi powiadomień
CREATE TABLE notification_log (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    type VARCHAR(64) NOT NULL,
    channel VARCHAR(32) NOT NULL,
    fingerprint VARCHAR(96) NOT NULL,
    payload JSON DEFAULT NULL,
    status VARCHAR(32) NOT NULL,
    error_message VARCHAR(255) DEFAULT NULL,
    sent_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    user_id INT NOT NULL,
    PRIMARY KEY(id)
);

CREATE INDEX IDX_ED15DF2A76ED395 ON notification_log (user_id);
CREATE UNIQUE INDEX uq_notification_fingerprint_channel ON notification_log (fingerprint, channel);

-- ============================================
-- MODUŁ AKWIZYCJI
-- ============================================

-- Tabela: supplier - Dostawcy
CREATE TABLE supplier (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    name VARCHAR(255) NOT NULL,
    contact_person VARCHAR(180) DEFAULT NULL,
    email VARCHAR(180) DEFAULT NULL,
    phone VARCHAR(30) DEFAULT NULL,
    address TEXT DEFAULT NULL,
    created_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    updated_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    PRIMARY KEY(id)
);

-- Tabela: acquisition_budget - Budżety akwizycji
CREATE TABLE acquisition_budget (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    name VARCHAR(160) NOT NULL,
    fiscal_year VARCHAR(9) NOT NULL,
    allocated_amount NUMERIC(12, 2) NOT NULL,
    spent_amount NUMERIC(12, 2) NOT NULL,
    currency VARCHAR(3) NOT NULL,
    created_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    updated_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    PRIMARY KEY(id)
);

-- Tabela: acquisition_order - Zamówienia akwizycyjne
CREATE TABLE acquisition_order (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    reference_number VARCHAR(120) DEFAULT NULL,
    title VARCHAR(255) NOT NULL,
    description TEXT DEFAULT NULL,
    items JSON DEFAULT NULL,
    total_amount NUMERIC(12, 2) NOT NULL,
    currency VARCHAR(3) NOT NULL,
    status VARCHAR(20) NOT NULL,
    created_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    updated_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    ordered_at TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL,
    expected_at TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL,
    received_at TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL,
    cancelled_at TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL,
    supplier_id INT NOT NULL,
    budget_id INT DEFAULT NULL,
    PRIMARY KEY(id)
);

CREATE INDEX IDX_1E96EAF32ADD6D8C ON acquisition_order (supplier_id);
CREATE INDEX IDX_1E96EAF336ABA6B8 ON acquisition_order (budget_id);

-- Tabela: acquisition_expense - Wydatki akwizycyjne
CREATE TABLE acquisition_expense (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    amount NUMERIC(12, 2) NOT NULL,
    currency VARCHAR(3) NOT NULL,
    description VARCHAR(255) NOT NULL,
    type VARCHAR(20) NOT NULL,
    posted_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    budget_id INT NOT NULL,
    order_id INT DEFAULT NULL,
    PRIMARY KEY(id)
);

CREATE INDEX IDX_82EA1DED36ABA6B8 ON acquisition_expense (budget_id);
CREATE INDEX IDX_82EA1DED8D9F6D38 ON acquisition_expense (order_id);

-- Tabela: weeding_record - Rekordy selekcji zbiorów
CREATE TABLE weeding_record (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    reason VARCHAR(255) NOT NULL,
    weeded_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL,
    book_copy_id INT NOT NULL,
    performed_by_id INT NOT NULL,
    PRIMARY KEY(id)
);

CREATE INDEX IDX_WR_COPY ON weeding_record (book_copy_id);
CREATE INDEX IDX_WR_PERFORMED_BY ON weeding_record (performed_by_id);

-- ============================================
-- KLUCZE OBCE
-- ============================================

ALTER TABLE book ADD CONSTRAINT FK_CBE5A331F675F31B FOREIGN KEY (author_id) REFERENCES author (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE book ADD CONSTRAINT FK_BOOK_TARGET_AGE_RANGE FOREIGN KEY (target_age_group) REFERENCES age_range (code) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE app_user ADD CONSTRAINT FK_APP_USER_AGE_RANGE FOREIGN KEY (age_range_code) REFERENCES age_range (code) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE book_category ADD CONSTRAINT FK_1FB30F9816A2B381 FOREIGN KEY (book_id) REFERENCES book (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE book_category ADD CONSTRAINT FK_1FB30F9812469DE2 FOREIGN KEY (category_id) REFERENCES category (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE book_copy ADD CONSTRAINT FK_5427F08A16A2B381 FOREIGN KEY (book_id) REFERENCES book (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE book_digital_asset ADD CONSTRAINT FK_817C37D016A2B381 FOREIGN KEY (book_id) REFERENCES book (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE rating ADD CONSTRAINT FK_D8892622A76ED395 FOREIGN KEY (user_id) REFERENCES app_user (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE rating ADD CONSTRAINT FK_D889262216A2B381 FOREIGN KEY (book_id) REFERENCES book (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE recommendation_feedback ADD CONSTRAINT FK_FEED_USER FOREIGN KEY (user_id) REFERENCES app_user (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE recommendation_feedback ADD CONSTRAINT FK_FEED_BOOK FOREIGN KEY (book_id) REFERENCES book (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE book_collection ADD CONSTRAINT FK_63E02F81436FBB41 FOREIGN KEY (curated_by_id) REFERENCES app_user (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE collection_books ADD CONSTRAINT FK_DE392C134A06EF1 FOREIGN KEY (book_collection_id) REFERENCES book_collection (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE collection_books ADD CONSTRAINT FK_DE392C116A2B381 FOREIGN KEY (book_id) REFERENCES book (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE loan ADD CONSTRAINT FK_C5D30D0316A2B381 FOREIGN KEY (book_id) REFERENCES book (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE loan ADD CONSTRAINT FK_C5D30D033B550FE4 FOREIGN KEY (book_copy_id) REFERENCES book_copy (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE loan ADD CONSTRAINT FK_C5D30D03A76ED395 FOREIGN KEY (user_id) REFERENCES app_user (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE reservation ADD CONSTRAINT FK_42C8495516A2B381 FOREIGN KEY (book_id) REFERENCES book (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE reservation ADD CONSTRAINT FK_42C849553B550FE4 FOREIGN KEY (book_copy_id) REFERENCES book_copy (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE reservation ADD CONSTRAINT FK_42C84955A76ED395 FOREIGN KEY (user_id) REFERENCES app_user (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE review ADD CONSTRAINT FK_794381C616A2B381 FOREIGN KEY (book_id) REFERENCES book (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE review ADD CONSTRAINT FK_794381C6A76ED395 FOREIGN KEY (user_id) REFERENCES app_user (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE fine ADD CONSTRAINT FK_BEA95492CE73868F FOREIGN KEY (loan_id) REFERENCES loan (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE favorite ADD CONSTRAINT FK_68C58ED9A76ED395 FOREIGN KEY (user_id) REFERENCES app_user (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE favorite ADD CONSTRAINT FK_68C58ED916A2B381 FOREIGN KEY (book_id) REFERENCES book (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE user_book_interaction ADD CONSTRAINT FK_USER_BOOK_INTERACTION_USER FOREIGN KEY (user_id) REFERENCES app_user (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE user_book_interaction ADD CONSTRAINT FK_USER_BOOK_INTERACTION_BOOK FOREIGN KEY (book_id) REFERENCES book (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE registration_token ADD CONSTRAINT FK_D09D01D3A76ED395 FOREIGN KEY (user_id) REFERENCES app_user (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE announcement ADD CONSTRAINT FK_4DB9D91CB03A8386 FOREIGN KEY (created_by_id) REFERENCES app_user (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE notification_log ADD CONSTRAINT FK_ED15DF2A76ED395 FOREIGN KEY (user_id) REFERENCES app_user (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE acquisition_order ADD CONSTRAINT FK_1E96EAF32ADD6D8C FOREIGN KEY (supplier_id) REFERENCES supplier (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE acquisition_order ADD CONSTRAINT FK_1E96EAF336ABA6B8 FOREIGN KEY (budget_id) REFERENCES acquisition_budget (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE acquisition_expense ADD CONSTRAINT FK_82EA1DED36ABA6B8 FOREIGN KEY (budget_id) REFERENCES acquisition_budget (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE acquisition_expense ADD CONSTRAINT FK_82EA1DED8D9F6D38 FOREIGN KEY (order_id) REFERENCES acquisition_order (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE weeding_record ADD CONSTRAINT FK_WR_COPY FOREIGN KEY (book_copy_id) REFERENCES book_copy (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE weeding_record ADD CONSTRAINT FK_WR_PERFORMED_BY FOREIGN KEY (performed_by_id) REFERENCES app_user (id) NOT DEFERRABLE INITIALLY IMMEDIATE;

-- ============================================
-- DANE TESTOWE
-- ============================================
\echo 'Inserting extended test data (30 records per table)...'

-- Przedziały wiekowe (do profilu czytelnika i dopasowania do book.target_age_group)
INSERT INTO age_range (code, label, min_age, max_age, description) VALUES
('child',  'Dzieci (0–12)', 0, 12, 'Czytelnicy dziecięcy'),
('teen',   'Młodzież (13–17)', 13, 17, 'Czytelnicy młodzieżowi'),
('adult',  'Dorośli (18–64)', 18, 64, 'Czytelnicy dorośli'),
('senior', 'Seniorzy (65+)', 65, NULL, 'Czytelnicy seniorzy');

-- Użytkownicy (30)
INSERT INTO app_user (id, email, name, roles, password, phone_number, address_line, city, postal_code, pesel, card_number, blocked, verified, verified_at, pending_approval, membership_group, age_range_code, loan_limit, blocked_reason, created_at, updated_at, privacy_consent_at, newsletter_subscribed, preferred_categories, onboarding_completed) VALUES
(1, 'user01@example.com', 'Administrator', '["ROLE_ADMIN"]', '$2y$12$y8eMR9yDsS5R3iB.nTKsIuo.f9ozJS0g2jvXDI7.FBmNuwcuiHU72', '+48123456789', 'ul. Sezamkowa 1', 'Warszawa', '00-001', '90010100001', 'CARD-00001', false, true, NOW(), false, 'admin', 'adult', 999, NULL, NOW(), NOW(), NOW(), true, NULL, true),
(2, 'user02@example.com', 'Jan Kowalski', '["ROLE_LIBRARIAN"]', '$2y$12$y8eMR9yDsS5R3iB.nTKsIuo.f9ozJS0g2jvXDI7.FBmNuwcuiHU72', '+48234567890', 'ul. Biblioteczna 2', 'Warszawa', '00-950', '88020200002', 'CARD-00002', false, true, NOW(), false, 'staff', 'adult', 50, NULL, NOW(), NOW(), NOW(), true, NULL, true),
(3, 'user03@example.com', 'Anna Nowak', '["ROLE_USER"]', '$2y$12$y8eMR9yDsS5R3iB.nTKsIuo.f9ozJS0g2jvXDI7.FBmNuwcuiHU72', '+48525531353', 'ul. Czytelnicza 3', 'Warszawa', '90-184', '89031258021', 'CARD-00003', false, true, NOW() - INTERVAL '45 days', false, 'standard', 'teen', 5, NULL, NOW() - INTERVAL '83 days', NOW(), NOW(), true, '[4,7]', true),
(4, 'user04@example.com', 'Maria Czytelnik', '["ROLE_USER"]', '$2y$13$Xhz8P0vQ.zKL9XGkYPfcReZE8QYj1MJOvGk.W7nRZ7I8x5YqzLVnm', '+48821834232', 'ul. Czytelnicza 4', 'Kraków', '93-572', '91022225867', 'CARD-00004', false, false, NULL, false, 'student', 'teen', 10, NULL, NOW() - INTERVAL '83 days', NOW(), NOW(), true, '[16,29,30]', false),
(5, 'user05@example.com', 'Piotr Wiśniewski', '["ROLE_USER"]', '$2y$13$Xhz8P0vQ.zKL9XGkYPfcReZE8QYj1MJOvGk.W7nRZ7I8x5YqzLVnm', NULL, 'ul. Czytelnicza 5', 'Gdańsk', '83-455', '73102218531', 'CARD-00005', false, true, NOW() - INTERVAL '22 days', false, 'premium', 'teen', 15, NULL, NOW() - INTERVAL '506 days', NOW(), NOW(), true, '[2,5,20,28]', true),
(6, 'user06@example.com', 'Katarzyna Wójcik', '["ROLE_USER"]', '$2y$13$Xhz8P0vQ.zKL9XGkYPfcReZE8QYj1MJOvGk.W7nRZ7I8x5YqzLVnm', '+48892770813', 'ul. Czytelnicza 6', 'Wrocław', '46-569', '70061949249', 'CARD-00006', false, true, NOW() - INTERVAL '9 days', false, 'standard', 'teen', 5, NULL, NOW() - INTERVAL '448 days', NOW(), NOW(), false, '[8,27]', true),
(7, 'user07@example.com', 'Tomasz Kowalczyk', '["ROLE_USER"]', '$2y$13$Xhz8P0vQ.zKL9XGkYPfcReZE8QYj1MJOvGk.W7nRZ7I8x5YqzLVnm', '+48658946996', 'ul. Czytelnicza 7', 'Poznań', '24-823', '98092567526', 'CARD-00007', false, true, NOW() - INTERVAL '65 days', false, 'student', 'teen', 10, NULL, NOW() - INTERVAL '85 days', NOW(), NOW(), true, '[3,10,29]', false),
(8, 'user08@example.com', 'Agnieszka Kamińska', '["ROLE_USER"]', '$2y$13$Xhz8P0vQ.zKL9XGkYPfcReZE8QYj1MJOvGk.W7nRZ7I8x5YqzLVnm', '+48888233424', 'ul. Czytelnicza 8', 'Łódź', '72-711', '96102021622', 'CARD-00008', false, false, NULL, true, 'premium', 'teen', 15, NULL, NOW() - INTERVAL '336 days', NOW(), NOW(), true, '[6,12,22,23]', true),
(9, 'user09@example.com', 'Paweł Lewandowski', '["ROLE_USER"]', '$2y$13$Xhz8P0vQ.zKL9XGkYPfcReZE8QYj1MJOvGk.W7nRZ7I8x5YqzLVnm', '+48753195262', 'ul. Czytelnicza 9', 'Szczecin', '66-858', '71041513474', 'CARD-00009', false, true, NOW() - INTERVAL '67 days', false, 'standard', 'teen', 5, NULL, NOW() - INTERVAL '398 days', NOW(), NOW(), true, '[2,24]', true),
(10, 'user10@example.com', 'Magdalena Zielińska', '["ROLE_USER"]', '$2y$13$Xhz8P0vQ.zKL9XGkYPfcReZE8QYj1MJOvGk.W7nRZ7I8x5YqzLVnm', NULL, 'ul. Czytelnicza 10', 'Katowice', '80-973', '76012173587', 'CARD-00010', false, true, NOW() - INTERVAL '106 days', false, 'student', 'teen', 10, NULL, NOW() - INTERVAL '438 days', NOW(), NOW(), true, '[4,20,24]', false),
(11, 'user11@example.com', 'Michał Szymański', '["ROLE_USER"]', '$2y$13$Xhz8P0vQ.zKL9XGkYPfcReZE8QYj1MJOvGk.W7nRZ7I8x5YqzLVnm', '+48643743859', 'ul. Czytelnicza 11', 'Lublin', '76-711', '72062832251', 'CARD-00011', false, true, NOW() - INTERVAL '90 days', false, 'premium', 'child', 15, NULL, NOW() - INTERVAL '277 days', NOW(), NOW(), true, '[7,14,21,29]', true),
(12, 'user12@example.com', 'Joanna Woźniak', '["ROLE_USER"]', '$2y$13$Xhz8P0vQ.zKL9XGkYPfcReZE8QYj1MJOvGk.W7nRZ7I8x5YqzLVnm', '+48738967621', 'ul. Czytelnicza 12', 'Białystok', '28-285', '77010525065', 'CARD-00012', false, false, NULL, false, 'standard', 'child', 5, NULL, NOW() - INTERVAL '394 days', NOW(), NOW(), false, '[13,16]', true),
(13, 'user13@example.com', 'Krzysztof Dąbrowski', '["ROLE_USER"]', '$2y$13$Xhz8P0vQ.zKL9XGkYPfcReZE8QYj1MJOvGk.W7nRZ7I8x5YqzLVnm', '+48733021385', 'ul. Czytelnicza 13', 'Warszawa', '75-624', '81021169893', 'CARD-00013', false, true, NOW() - INTERVAL '11 days', false, 'student', 'child', 10, NULL, NOW() - INTERVAL '517 days', NOW(), NOW(), true, '[23,25,29]', false),
(14, 'user14@example.com', 'Monika Kozłowska', '["ROLE_USER"]', '$2y$13$Xhz8P0vQ.zKL9XGkYPfcReZE8QYj1MJOvGk.W7nRZ7I8x5YqzLVnm', '+48541486973', 'ul. Czytelnicza 14', 'Kraków', '23-707', '94021169073', 'CARD-00014', false, true, NOW() - INTERVAL '67 days', false, 'premium', 'child', 15, NULL, NOW() - INTERVAL '562 days', NOW(), NOW(), true, '[1,3,14,28]', true),
(15, 'user15@example.com', 'Łukasz Jankowski', '["ROLE_USER"]', '$2y$13$Xhz8P0vQ.zKL9XGkYPfcReZE8QYj1MJOvGk.W7nRZ7I8x5YqzLVnm', NULL, 'ul. Czytelnicza 15', 'Gdańsk', '31-878', '98122640219', 'CARD-00015', false, true, NOW() - INTERVAL '55 days', false, 'standard', 'child', 5, NULL, NOW() - INTERVAL '575 days', NOW(), NOW(), true, '[8,11]', true),
(16, 'user16@example.com', 'Natalia Mazur', '["ROLE_USER"]', '$2y$13$Xhz8P0vQ.zKL9XGkYPfcReZE8QYj1MJOvGk.W7nRZ7I8x5YqzLVnm', '+48611554339', 'ul. Czytelnicza 16', 'Wrocław', '78-849', '97122486675', 'CARD-00016', false, false, NULL, true, 'student', 'adult', 10, NULL, NOW() - INTERVAL '389 days', NOW(), NOW(), true, '[14,16,21]', false),
(17, 'user17@example.com', 'Marcin Krawczyk', '["ROLE_USER"]', '$2y$13$Xhz8P0vQ.zKL9XGkYPfcReZE8QYj1MJOvGk.W7nRZ7I8x5YqzLVnm', '+48719544823', 'ul. Czytelnicza 17', 'Poznań', '62-257', '79041013866', 'CARD-00017', true, true, NOW() - INTERVAL '74 days', false, 'premium', 'adult', 15, 'Nieopłacone kary', NOW() - INTERVAL '547 days', NOW(), NOW(), true, '[10,27]', true),
(18, 'user18@example.com', 'Aleksandra Piotrowska', '["ROLE_USER"]', '$2y$13$Xhz8P0vQ.zKL9XGkYPfcReZE8QYj1MJOvGk.W7nRZ7I8x5YqzLVnm', '+48741997838', 'ul. Czytelnicza 18', 'Łódź', '14-419', '77040652408', 'CARD-00018', false, true, NOW() - INTERVAL '120 days', false, 'standard', 'adult', 5, NULL, NOW() - INTERVAL '444 days', NOW(), NOW(), false, '[12,15]', true),
(19, 'user19@example.com', 'Grzegorz Grabowski', '["ROLE_USER"]', '$2y$13$Xhz8P0vQ.zKL9XGkYPfcReZE8QYj1MJOvGk.W7nRZ7I8x5YqzLVnm', '+48807290337', 'ul. Czytelnicza 19', 'Szczecin', '86-324', '98020111918', 'CARD-00019', false, true, NOW() - INTERVAL '31 days', false, 'student', 'adult', 10, NULL, NOW() - INTERVAL '18 days', NOW(), NOW(), true, '[3,20]', false),
(20, 'user20@example.com', 'Zuzanna Pawlak', '["ROLE_USER"]', '$2y$13$Xhz8P0vQ.zKL9XGkYPfcReZE8QYj1MJOvGk.W7nRZ7I8x5YqzLVnm', NULL, 'ul. Czytelnicza 20', 'Katowice', '41-813', '82102389943', 'CARD-00020', false, false, NULL, false, 'premium', 'adult', 15, NULL, NOW() - INTERVAL '48 days', NOW(), NOW(), true, '[20,24,29,30]', true),
(21, 'user21@example.com', 'Damian Michalski', '["ROLE_USER"]', '$2y$13$Xhz8P0vQ.zKL9XGkYPfcReZE8QYj1MJOvGk.W7nRZ7I8x5YqzLVnm', '+48667942084', 'ul. Czytelnicza 21', 'Lublin', '55-524', '88062449291', 'CARD-00021', false, true, NOW() - INTERVAL '96 days', false, 'standard', 'adult', 5, NULL, NOW() - INTERVAL '229 days', NOW(), NOW(), true, '[7,8]', true),
(22, 'user22@example.com', 'Karolina Król', '["ROLE_USER"]', '$2y$13$Xhz8P0vQ.zKL9XGkYPfcReZE8QYj1MJOvGk.W7nRZ7I8x5YqzLVnm', '+48502692841', 'ul. Czytelnicza 22', 'Białystok', '83-811', '81082853114', 'CARD-00022', false, true, NOW() - INTERVAL '114 days', false, 'student', 'adult', 10, NULL, NOW() - INTERVAL '243 days', NOW(), NOW(), true, '[3,10,15]', false),
(23, 'user23@example.com', 'Rafał Wieczorek', '["ROLE_USER"]', '$2y$13$Xhz8P0vQ.zKL9XGkYPfcReZE8QYj1MJOvGk.W7nRZ7I8x5YqzLVnm', '+48735884072', 'ul. Czytelnicza 23', 'Warszawa', '93-747', '89030884195', 'CARD-00023', false, true, NOW() - INTERVAL '106 days', false, 'premium', 'adult', 15, NULL, NOW() - INTERVAL '452 days', NOW(), NOW(), true, '[10,15,19,25]', true),
(24, 'user24@example.com', 'Weronika Jabłońska', '["ROLE_USER"]', '$2y$13$Xhz8P0vQ.zKL9XGkYPfcReZE8QYj1MJOvGk.W7nRZ7I8x5YqzLVnm', '+48564787143', 'ul. Czytelnicza 24', 'Kraków', '90-342', '76040435843', 'CARD-00024', false, false, NULL, true, 'standard', 'adult', 5, NULL, NOW() - INTERVAL '239 days', NOW(), NOW(), false, '[5,12]', true),
(25, 'user25@example.com', 'Mateusz Nowicki', '["ROLE_USER"]', '$2y$13$Xhz8P0vQ.zKL9XGkYPfcReZE8QYj1MJOvGk.W7nRZ7I8x5YqzLVnm', NULL, 'ul. Czytelnicza 25', 'Gdańsk', '11-761', '78020223882', 'CARD-00025', false, true, NOW() - INTERVAL '91 days', false, 'student', 'adult', 10, NULL, NOW() - INTERVAL '549 days', NOW(), NOW(), true, '[12,17,30]', false),
(26, 'user26@example.com', 'Julia Maj', '["ROLE_USER"]', '$2y$13$Xhz8P0vQ.zKL9XGkYPfcReZE8QYj1MJOvGk.W7nRZ7I8x5YqzLVnm', '+48894061181', 'ul. Czytelnicza 26', 'Wrocław', '21-720', '82050739503', 'CARD-00026', false, true, NOW() - INTERVAL '100 days', false, 'premium', 'adult', 15, NULL, NOW() - INTERVAL '413 days', NOW(), NOW(), true, '[12,15,25,29]', true),
(27, 'user27@example.com', 'Bartosz Ostrowski', '["ROLE_USER"]', '$2y$13$Xhz8P0vQ.zKL9XGkYPfcReZE8QYj1MJOvGk.W7nRZ7I8x5YqzLVnm', '+48508008844', 'ul. Czytelnicza 27', 'Poznań', '47-274', '99112326556', 'CARD-00027', false, true, NOW() - INTERVAL '91 days', false, 'standard', 'adult', 5, NULL, NOW() - INTERVAL '196 days', NOW(), NOW(), true, '[6,28]', true),
(28, 'user28@example.com', 'Ewa Górska', '["ROLE_USER"]', '$2y$13$Xhz8P0vQ.zKL9XGkYPfcReZE8QYj1MJOvGk.W7nRZ7I8x5YqzLVnm', '+48505094687', 'ul. Czytelnicza 28', 'Łódź', '86-571', '80012533403', 'CARD-00028', false, false, NULL, false, 'student', 'senior', 10, NULL, NOW() - INTERVAL '15 days', NOW(), NOW(), true, '[9,14,24]', false),
(29, 'user29@example.com', 'Patryk Kubiak', '["ROLE_USER"]', '$2y$13$Xhz8P0vQ.zKL9XGkYPfcReZE8QYj1MJOvGk.W7nRZ7I8x5YqzLVnm', '+48738559209', 'ul. Czytelnicza 29', 'Szczecin', '82-774', '82041017608', 'CARD-00029', true, true, NOW() - INTERVAL '73 days', false, 'premium', 'senior', 15, 'Nieopłacone kary', NOW() - INTERVAL '428 days', NOW(), NOW(), true, '[7,9,20]', true),
(30, 'user30@example.com', 'Oliwia Sikora', '["ROLE_USER"]', '$2y$13$Xhz8P0vQ.zKL9XGkYPfcReZE8QYj1MJOvGk.W7nRZ7I8x5YqzLVnm', NULL, 'ul. Czytelnicza 30', 'Katowice', '86-527', '98112214390', 'CARD-00030', false, true, NOW() - INTERVAL '24 days', false, 'standard', 'senior', 5, NULL, NOW() - INTERVAL '278 days', NOW(), NOW(), false, '[12,21]', true);

-- Autorzy (30)
INSERT INTO author (id, name) VALUES
(1, 'Andrzej Sapkowski'),
(2, 'Olga Tokarczuk'),
(3, 'Stanisław Lem'),
(4, 'Ryszard Kapuściński'),
(5, 'Wisława Szymborska'),
(6, 'Henryk Sienkiewicz'),
(7, 'Czesław Miłosz'),
(8, 'J.K. Rowling'),
(9, 'George Orwell'),
(10, 'Isaac Asimov'),
(11, 'Stephen King'),
(12, 'Agatha Christie'),
(13, 'Haruki Murakami'),
(14, 'Ernest Hemingway'),
(15, 'Jane Austen'),
(16, 'Brandon Sanderson'),
(17, 'Neil Gaiman'),
(18, 'Margaret Atwood'),
(19, 'Terry Pratchett'),
(20, 'Ursula K. Le Guin'),
(21, 'Philip K. Dick'),
(22, 'J.R.R. Tolkien'),
(23, 'Frank Herbert'),
(24, 'Albert Camus'),
(25, 'Gabriel García Márquez'),
(26, 'Umberto Eco'),
(27, 'Dan Brown'),
(28, 'Jo Nesbř'),
(29, 'Yuval Noah Harari'),
(30, 'Hannah Arendt');

-- Kategorie (30)
INSERT INTO category (id, name) VALUES
(1, 'Fantastyka'),
(2, 'Literatura piękna'),
(3, 'Poezja'),
(4, 'Science Fiction'),
(5, 'Fantasy'),
(6, 'Literatura faktu'),
(7, 'Technologia'),
(8, 'Historia'),
(9, 'Kryminał'),
(10, 'Romans'),
(11, 'Biografia'),
(12, 'Psychologia'),
(13, 'Ekonomia'),
(14, 'Filozofia'),
(15, 'Podróże'),
(16, 'Komiks'),
(17, 'Dla dzieci'),
(18, 'Young Adult'),
(19, 'Horror'),
(20, 'Esej'),
(21, 'Reportaż'),
(22, 'Thriller'),
(23, 'Sztuka'),
(24, 'Nauka'),
(25, 'Zdrowie'),
(26, 'Kulinaria'),
(27, 'Sport'),
(28, 'Biznes'),
(29, 'Edukacja'),
(30, 'Religia');

-- Książki (30)
INSERT INTO book (id, title, isbn, author_id, copies, total_copies, storage_copies, open_stack_copies, description, publisher, publication_year, resource_type, signature, target_age_group, created_at) VALUES
(1, 'Wiedzmin: Ostatnie zyczenie', '978-83-7469-627-4', 1, 5, 5, 3, 2, 'Zbior opowiadan wprowadzajacy postac Geralta z Rivii.', 'SuperNOWA', 1993, 'Ksiazka drukowana', 'F-SAP-001', 'adult', NOW()),
(2, 'Ksiega Jakubowe', '978-83-08-06384-6', 2, 3, 3, 2, 1, 'Epicka opowiesc o Jakubie Franku i jego wspolnocie.', 'Wydawnictwo Literackie', 2014, 'Ksiazka drukowana', 'L-TOK-001', 'adult', NOW()),
(3, 'Solaris', '978-83-7506-127-3', 3, 4, 4, 2, 2, 'Klasyczna powiesc SF o niepoznawalnej inteligencji planety.', 'Wydawnictwo Literackie', 1961, 'Ksiazka drukowana', 'SF-LEM-001', 'adult', NOW()),
(4, 'Imperium', '978-83-240-0942-7', 4, 2, 2, 1, 1, 'Reportaz o rozpadzie ZSRR i podrozy po jego peryferiach.', 'Czytelnik', 1993, 'Ksiazka drukowana', 'R-KAP-001', 'adult', NOW()),
(5, 'Sto pociech', '978-83-08-03371-9', 5, 2, 2, 2, 0, 'Zbior wierszy noblistki z lat 60. XX wieku.', 'Wydawnictwo a5', 1967, 'Ksiazka drukowana', 'P-SZY-001', 'adult', NOW()),
(6, 'Quo Vadis', '978-83-240-1234-5', 6, 6, 6, 4, 2, 'Powiesc historyczna z czasow Nerona i pierwszych chrzescijan.', 'Czytelnik', 1896, 'Ksiazka drukowana', 'H-SIE-001', 'teen', NOW()),
(7, 'Zniewolony umysl', '978-83-08-04567-8', 7, 3, 3, 2, 1, 'Esej o postawach intelektualistow wobec totalitaryzmu.', 'Instytut Literacki', 1953, 'Ksiazka drukowana', 'E-MIL-001', 'adult', NOW()),
(8, 'Harry Potter i Kamien Filozoficzny', '978-83-7327-823-4', 8, 8, 8, 4, 4, 'Poczatek przygod mlodego czarodzieja w Hogwarcie.', 'Media Rodzina', 1997, 'E-book', 'F-ROW-001', 'child', NOW()),
(9, 'Rok 1984', '978-83-240-5678-9', 9, 5, 5, 3, 2, 'Dystopia o spoleczenstwie pod wszechobecna kontrola.', 'Muza', 1949, 'Ksiazka drukowana', 'SF-ORW-001', 'adult', NOW()),
(10, 'Fundacja', '978-83-7469-234-5', 10, 4, 4, 2, 2, 'Pierwszy tom cyklu o psychohistorii i upadku imperium.', 'Zysk i S-ka', 1951, 'Ksiazka drukowana', 'SF-ASI-001', 'teen', NOW()),
(11, 'Mistrz i Malgorzata', '978-83-1409-859-4', 11, 5, 5, 4, 1, 'Satyryczna powiesc z watkiem diabelskiej wizyty w Moskwie.', 'Czytelnik', 1967, 'Ksiazka drukowana', 'SIG-11-011', 'adult', NOW()),
(12, 'Zbrodnia i kara', '978-83-2679-792-8', 12, 3, 3, 0, 3, 'Psychologiczna powiesc o winie, karze i odkupieniu.', 'Wydawnictwo Literackie', 1866, 'Ksiazka drukowana', 'SIG-12-012', 'adult', NOW()),
(13, 'Duma i uprzedzenie', '978-83-1488-195-3', 13, 5, 5, 1, 4, 'Klasyka literatury obyczajowej o rodzinie Bennetow.', 'Penguin Classics', 1813, 'E-book', 'SIG-13-013', 'teen', NOW()),
(14, 'Gra o tron', '978-83-1434-674-3', 14, 10, 10, 4, 6, 'Pierwszy tom sagi o walce o wladze w Westeros.', 'Zysk i S-ka', 1996, 'Audiobook', 'SIG-14-014', 'adult', NOW()),
(15, 'Diuna', '978-83-8359-703-4', 15, 2, 2, 2, 0, 'Epicka powiesc SF o planecie Arrakis i walce rodow.', 'Rebis', 1965, 'Ksiazka drukowana', 'SIG-15-015', 'teen', NOW()),
(16, 'American Gods', '978-83-6574-384-2', 16, 5, 5, 3, 2, 'Opowiesc o starych i nowych bogach we wspolczesnej Ameryce.', 'Mag', 2001, 'E-book', 'SIG-16-016', 'adult', NOW()),
(17, 'Opowiesc podrecznej', '978-83-2519-489-1', 17, 7, 7, 2, 5, 'Antyutopia o spoleczenstwie Gilead i kontroli nad kobietami.', 'Zysk i S-ka', 1985, 'Ksiazka drukowana', 'SIG-17-017', 'adult', NOW()),
(18, 'Lsnienie', '978-83-5333-926-0', 18, 9, 9, 1, 8, 'Thriller o hotelu Overlook i narastajacym obledzie.', 'Albatros', 1977, 'Ksiazka drukowana', 'SIG-18-018', 'adult', NOW()),
(19, 'Morderstwo w Orient Expressie', '978-83-7201-180-8', 19, 6, 6, 0, 6, 'Kryminal z Herkulesem Poirot i zagadka w pociagu.', 'Wydawnictwo Dolnoslaskie', 1934, 'E-book', 'SIG-19-019', 'teen', NOW()),
(20, 'Norwegian Wood', '978-83-6925-691-3', 20, 3, 3, 3, 0, 'Nostalgiczna opowiesc o dorastaniu w Tokio lat 60.', 'Muza', 1987, 'Audiobook', 'SIG-20-020', 'adult', NOW()),
(21, 'Sto lat samotnosci', '978-83-5741-181-3', 21, 3, 3, 0, 3, 'Saga rodu Buendia i magiczny realizm Macondo.', 'Wydawnictwo Literackie', 1967, 'Ksiazka drukowana', 'SIG-21-021', 'adult', NOW()),
(22, 'Imie rozy', '978-83-8428-750-5', 22, 4, 4, 2, 2, 'Intryga kryminalna w sredniowiecznym klasztorze.', 'Noir Sur Blanc', 1980, 'E-book', 'SIG-22-022', 'adult', NOW()),
(23, 'Kod Leonarda da Vinci', '978-83-4432-786-4', 23, 3, 3, 2, 1, 'Thriller o tajemnicy zakonnej i szyfrach sztuki.', 'Sonia Draga', 2003, 'Audiobook', 'SIG-23-023', 'teen', NOW()),
(24, 'Czlowiek z Wysokiego Zamku', '978-83-5010-267-7', 24, 8, 8, 4, 4, 'Alternatywna historia swiata po zwyciestwie osi.', 'Rebis', 1962, 'Ksiazka drukowana', 'SIG-24-024', 'adult', NOW()),
(25, 'Wladca Pierscieni: Druzyna Pierscienia', '978-83-4598-801-5', 25, 2, 2, 2, 0, 'Pierwszy tom trylogii o Wladcy Pierscieni.', 'Muza', 1954, 'E-book', 'SIG-25-025', 'teen', NOW()),
(26, 'Kosmos', '978-83-6168-510-4', 26, 3, 3, 2, 1, 'Groteskowa powiesc o poszukiwaniu sensu i znakow.', 'Wydawnictwo Literackie', 1965, 'Ksiazka drukowana', 'SIG-26-026', 'adult', NOW()),
(27, 'Sapiens: Od zwierzat do bogow', '978-83-6155-317-7', 27, 8, 8, 1, 7, 'Historia czlowieka od pradziejow po wspolczesnosc.', 'PWN', 2011, 'Ksiazka drukowana', 'SIG-27-027', 'adult', NOW()),
(28, 'Kondycja ludzka', '978-83-5339-242-3', 28, 10, 10, 2, 8, 'Powiesc o rewolucji w Szanghaju i dylematach moralnych.', 'Gallimard', 1933, 'E-book', 'SIG-28-028', 'adult', NOW()),
(29, 'Rok 1000', '978-83-8019-697-6', 29, 7, 7, 4, 3, 'Popularnonaukowy portret Europy u progu drugiego milenium.', 'PWN', 1989, 'Audiobook', 'SIG-29-029', 'adult', NOW()),
(30, 'Psychologia tlumu', '978-83-9348-605-1', 30, 2, 2, 2, 0, 'Klasyczne studium zachowan zbiorowych i mechanizmow mas.', 'PWN', 1895, 'Ksiazka drukowana', 'SIG-30-030', 'adult', NOW());

-- Relacje książka-kategoria (30)
INSERT INTO book_category (book_id, category_id) VALUES
(1, 1),
(2, 2),
(3, 4),
(4, 6),
(5, 3),
(6, 8),
(7, 6),
(8, 5),
(9, 4),
(10, 4),
(11, 2),
(12, 2),
(13, 2),
(14, 5),
(15, 4),
(16, 5),
(17, 2),
(18, 19),
(19, 9),
(20, 2),
(21, 2),
(22, 9),
(23, 22),
(24, 4),
(25, 5),
(26, 24),
(27, 6),
(28, 14),
(29, 8),
(30, 12);

-- Dodatkowe kategorie dla książek (średnio 2–4 kategorie na tytuł)
INSERT INTO book_category (book_id, category_id) VALUES
(1, 5),
(2, 8),
(2, 30),
(3, 24),
(3, 14),
(4, 21),
(4, 15),
(4, 8),
(5, 2),
(6, 2),
(6, 30),
(7, 14),
(7, 20),
(7, 12),
(8, 17),
(8, 18),
(8, 1),
(9, 2),
(9, 14),
(10, 24),
(11, 1),
(11, 14),
(12, 9),
(12, 12),
(12, 14),
(13, 10),
(14, 1),
(15, 5),
(15, 24),
(16, 1),
(16, 19),
(16, 30),
(17, 4),
(17, 22),
(17, 14),
(18, 22),
(18, 2),
(19, 22),
(20, 10),
(20, 18),
(21, 14),
(22, 8),
(22, 30),
(22, 2),
(23, 9),
(23, 8),
(24, 8),
(24, 14),
(24, 22),
(25, 1),
(26, 7),
(26, 14),
(26, 6),
(27, 8),
(27, 24),
(27, 12),
(27, 13),
(28, 12),
(28, 20),
(29, 24),
(29, 6),
(30, 24),
(30, 20),
(30, 13);


-- Egzemplarze książek (30)
INSERT INTO book_copy (id, book_id, inventory_code, status, location, access_type, condition_state, created_at, updated_at) VALUES
(1, 1, 'INV-001-001', 'AVAILABLE', 'Magazyn A1', 'OPEN_STACK', 'Dobry', NOW(), NOW()),
(2, 1, 'INV-001-002', 'AVAILABLE', 'Półka główna', 'OPEN_STACK', 'Bardzo dobry', NOW(), NOW()),
(3, 1, 'INV-001-003', 'BORROWED', 'Wypożyczona', 'OPEN_STACK', 'Dobry', NOW(), NOW()),
(4, 2, 'INV-002-001', 'AVAILABLE', 'Magazyn B2', 'STORAGE', 'Dobry', NOW(), NOW()),
(5, 3, 'INV-003-001', 'AVAILABLE', 'Półka SF', 'OPEN_STACK', 'Bardzo dobry', NOW(), NOW()),
(6, 3, 'INV-003-002', 'AVAILABLE', 'Półka SF', 'OPEN_STACK', 'Dobry', NOW(), NOW()),
(7, 8, 'INV-008-001', 'AVAILABLE', 'Cyfrowy', 'REFERENCE', 'Nieaplikowalny', NOW(), NOW()),
(8, 9, 'INV-009-001', 'AVAILABLE', 'Półka dystopie', 'OPEN_STACK', 'Dobry', NOW(), NOW()),
(9, 10, 'INV-010-001', 'BORROWED', 'Wypożyczona', 'OPEN_STACK', 'Dobry', NOW(), NOW()),
(10, 10, 'INV-010-002', 'AVAILABLE', 'Półka SF', 'OPEN_STACK', 'Bardzo dobry', NOW(), NOW()),
(11, 6, 'INV-006-001', 'RESERVED', 'Rezerwacja', 'OPEN_STACK', 'Średni', NOW(), NOW()),
(12, 6, 'INV-006-002', 'AVAILABLE', 'Magazyn H1', 'STORAGE', 'Dobry', NOW(), NOW()),
(13, 11, 'INV-011-001', 'AVAILABLE', 'Półka klasyka', 'OPEN_STACK', 'Dobry', NOW(), NOW()),
(14, 12, 'INV-012-001', 'BORROWED', 'Wypożyczona', 'OPEN_STACK', 'Bardzo dobry', NOW(), NOW()),
(15, 13, 'INV-013-001', 'AVAILABLE', 'Półka literatura', 'OPEN_STACK', 'Dobry', NOW(), NOW()),
(16, 14, 'INV-014-001', 'RESERVED', 'Rezerwacja', 'OPEN_STACK', 'Bardzo dobry', NOW(), NOW()),
(17, 15, 'INV-015-001', 'AVAILABLE', 'Półka SF', 'OPEN_STACK', 'Dobry', NOW(), NOW()),
(18, 16, 'INV-016-001', 'BORROWED', 'Wypożyczona', 'STORAGE', 'Dobry', NOW(), NOW()),
(19, 17, 'INV-017-001', 'AVAILABLE', 'Półka dystopie', 'OPEN_STACK', 'Bardzo dobry', NOW(), NOW()),
(20, 18, 'INV-018-001', 'MAINTENANCE', 'Konserwacja', 'STORAGE', 'Zużyty', NOW(), NOW()),
(21, 19, 'INV-019-001', 'AVAILABLE', 'Półka kryminał', 'OPEN_STACK', 'Dobry', NOW(), NOW()),
(22, 20, 'INV-020-001', 'BORROWED', 'Wypożyczona', 'OPEN_STACK', 'Dobry', NOW(), NOW()),
(23, 21, 'INV-021-001', 'AVAILABLE', 'Półka klasyka', 'OPEN_STACK', 'Dobry', NOW(), NOW()),
(24, 22, 'INV-022-001', 'AVAILABLE', 'Półka historia', 'OPEN_STACK', 'Średni', NOW(), NOW()),
(25, 23, 'INV-023-001', 'RESERVED', 'Rezerwacja', 'OPEN_STACK', 'Bardzo dobry', NOW(), NOW()),
(26, 24, 'INV-024-001', 'AVAILABLE', 'Półka SF', 'OPEN_STACK', 'Dobry', NOW(), NOW()),
(27, 27, 'INV-027-001', 'AVAILABLE', 'Cyfrowy', 'REFERENCE', 'Nieaplikowalny', NOW(), NOW()),
(28, 25, 'INV-025-001', 'AVAILABLE', 'Półka fantasy', 'OPEN_STACK', 'Bardzo dobry', NOW(), NOW()),
(29, 26, 'INV-026-001', 'BORROWED', 'Wypożyczona', 'OPEN_STACK', 'Dobry', NOW(), NOW()),
(30, 30, 'INV-030-001', 'AVAILABLE', 'Półka psychologia', 'OPEN_STACK', 'Dobry', NOW(), NOW());


-- Uaktualnij liczniki dostepnosci na podstawie book_copy
UPDATE book b
SET total_copies = sub.total,
    copies = sub.available,
    storage_copies = sub.storage,
    open_stack_copies = sub.open_stack
FROM (
    SELECT book_id,
           COUNT(*) FILTER (WHERE status <> 'WITHDRAWN') AS total,
           COUNT(*) FILTER (WHERE status = 'AVAILABLE') AS available,
           COUNT(*) FILTER (WHERE status = 'AVAILABLE' AND access_type = 'STORAGE') AS storage,
           COUNT(*) FILTER (WHERE status = 'AVAILABLE' AND access_type = 'OPEN_STACK') AS open_stack
    FROM book_copy
    GROUP BY book_id
) AS sub
WHERE b.id = sub.book_id;

-- Zasoby cyfrowe książek (30)
INSERT INTO book_digital_asset (id, label, original_filename, mime_type, size, storage_name, created_at, book_id) VALUES
(1, 'Fragment PDF', 'book_02_fragment_pdf.pdf', 'application/pdf', 928515, 'asset_001_98c6f2c228.pdf', NOW(), 2),
(2, 'E-book EPUB', 'book_03_e-book_epub.epub', 'application/epub+zip', 4540877, 'asset_002_c22c603496.epub', NOW(), 3),
(3, 'Audiobook MP3', 'book_04_audiobook_mp3.mp3', 'audio/mpeg', 1512749, 'asset_003_b7b2d5a8d1.mp3', NOW(), 4),
(4, 'Spis treści', 'book_05_spis_treści.pdf', 'application/pdf', 12950947, 'asset_004_5270c475a5.pdf', NOW(), 5),
(5, 'Okładka', 'book_06_okładka.jpg', 'image/jpeg', 6882383, 'asset_005_34ffb55da2.jpg', NOW(), 6),
(6, 'Fragment PDF', 'book_07_fragment_pdf.pdf', 'application/pdf', 4522030, 'asset_006_c0a3056327.pdf', NOW(), 7),
(7, 'E-book EPUB', 'book_08_e-book_epub.epub', 'application/epub+zip', 1856910, 'asset_007_e4f762894f.epub', NOW(), 8),
(8, 'Audiobook MP3', 'book_09_audiobook_mp3.mp3', 'audio/mpeg', 14117754, 'asset_008_d664744c28.mp3', NOW(), 9),
(9, 'Spis treści', 'book_10_spis_treści.pdf', 'application/pdf', 14727140, 'asset_009_a01107e3d8.pdf', NOW(), 10),
(10, 'Okładka', 'book_11_okładka.jpg', 'image/jpeg', 690112, 'asset_010_dacfe45b1c.jpg', NOW(), 11),
(11, 'Fragment PDF', 'book_12_fragment_pdf.pdf', 'application/pdf', 6410650, 'asset_011_061141c938.pdf', NOW(), 12),
(12, 'E-book EPUB', 'book_13_e-book_epub.epub', 'application/epub+zip', 9045977, 'asset_012_f43b6d6741.epub', NOW(), 13),
(13, 'Audiobook MP3', 'book_14_audiobook_mp3.mp3', 'audio/mpeg', 9484142, 'asset_013_49c676e598.mp3', NOW(), 14),
(14, 'Spis treści', 'book_15_spis_treści.pdf', 'application/pdf', 5623352, 'asset_014_f2b1506c96.pdf', NOW(), 15),
(15, 'Okładka', 'book_16_okładka.jpg', 'image/jpeg', 5767645, 'asset_015_deb343d706.jpg', NOW(), 16),
(16, 'Fragment PDF', 'book_17_fragment_pdf.pdf', 'application/pdf', 14345641, 'asset_016_3370496c1e.pdf', NOW(), 17),
(17, 'E-book EPUB', 'book_18_e-book_epub.epub', 'application/epub+zip', 920765, 'asset_017_2fe877807a.epub', NOW(), 18),
(18, 'Audiobook MP3', 'book_19_audiobook_mp3.mp3', 'audio/mpeg', 2728690, 'asset_018_df726cbd04.mp3', NOW(), 19),
(19, 'Spis treści', 'book_20_spis_treści.pdf', 'application/pdf', 2315888, 'asset_019_b08044bc3a.pdf', NOW(), 20),
(20, 'Okładka', 'book_21_okładka.jpg', 'image/jpeg', 5707556, 'asset_020_68160881ab.jpg', NOW(), 21),
(21, 'Fragment PDF', 'book_22_fragment_pdf.pdf', 'application/pdf', 9461380, 'asset_021_c5dad58f34.pdf', NOW(), 22),
(22, 'E-book EPUB', 'book_23_e-book_epub.epub', 'application/epub+zip', 5650174, 'asset_022_c46ded8a11.epub', NOW(), 23),
(23, 'Audiobook MP3', 'book_24_audiobook_mp3.mp3', 'audio/mpeg', 11822401, 'asset_023_d92e932e64.mp3', NOW(), 24),
(24, 'Spis treści', 'book_25_spis_treści.pdf', 'application/pdf', 4163158, 'asset_024_c62b170d2b.pdf', NOW(), 25),
(25, 'Okładka', 'book_26_okładka.jpg', 'image/jpeg', 2797719, 'asset_025_fded8d59d3.jpg', NOW(), 26),
(26, 'Fragment PDF', 'book_27_fragment_pdf.pdf', 'application/pdf', 78027, 'asset_026_294f13a2b8.pdf', NOW(), 27),
(27, 'E-book EPUB', 'book_28_e-book_epub.epub', 'application/epub+zip', 7369493, 'asset_027_9cb4a3b1ab.epub', NOW(), 28),
(28, 'Audiobook MP3', 'book_29_audiobook_mp3.mp3', 'audio/mpeg', 13028652, 'asset_028_d444c19526.mp3', NOW(), 29),
(29, 'Spis treści', 'book_30_spis_treści.pdf', 'application/pdf', 1519910, 'asset_029_ece932ecc4.pdf', NOW(), 30),
(30, 'Okładka', 'book_01_okładka.jpg', 'image/jpeg', 14790970, 'asset_030_dd7bb1073d.jpg', NOW(), 1);

-- Wypożyczenia (30)
INSERT INTO loan (id, book_id, book_copy_id, user_id, borrowed_at, due_at, returned_at, extensions_count, last_extended_at) VALUES
(1, 1, 1, 6, NOW() - INTERVAL '9 days', NOW() + INTERVAL '30 days', NULL, 0, NULL),
(2, 1, 2, 9, NOW() - INTERVAL '12 days', NOW() + INTERVAL '26 days', NULL, 0, NULL),
(3, 1, 3, 12, NOW() - INTERVAL '9 days', NOW() + INTERVAL '18 days', NULL, 1, NOW() - INTERVAL '91 days'),
(4, 2, 4, 15, NOW() - INTERVAL '14 days', NOW() + INTERVAL '5 days', NULL, 0, NULL),
(5, 3, 5, 18, NOW() - INTERVAL '4 days', NOW() + INTERVAL '24 days', NULL, 0, NULL),
(6, 3, 6, 21, NOW() - INTERVAL '3 days', NOW() + INTERVAL '21 days', NULL, 1, NOW() - INTERVAL '55 days'),
(7, 8, 7, 24, NOW() - INTERVAL '23 days', NOW() + INTERVAL '7 days', NULL, 0, NULL),
(8, 9, 8, 27, NOW() - INTERVAL '3 days', NOW() + INTERVAL '18 days', NULL, 0, NULL),
(9, 10, 9, 30, NOW() - INTERVAL '1 days', NOW() + INTERVAL '30 days', NULL, 1, NOW() - INTERVAL '78 days'),
(10, 10, 10, 5, NOW() - INTERVAL '13 days', NOW() + INTERVAL '7 days', NULL, 0, NULL),
(11, 6, 11, 8, NOW() - INTERVAL '18 days', NOW() + INTERVAL '27 days', NULL, 0, NULL),
(12, 6, 12, 11, NOW() - INTERVAL '21 days', NOW() + INTERVAL '17 days', NULL, 1, NOW() - INTERVAL '13 days'),
(13, 11, 13, 14, NOW() - INTERVAL '11 days', NOW() + INTERVAL '13 days', NULL, 0, NULL),
(14, 12, 14, 17, NOW() - INTERVAL '16 days', NOW() + INTERVAL '6 days', NULL, 0, NULL),
(15, 13, 15, 20, NOW() - INTERVAL '173 days', NOW() - INTERVAL '26 days', NOW() - INTERVAL '3 days', 1, NOW() - INTERVAL '54 days'),
(16, 14, 16, 23, NOW() - INTERVAL '36 days', NOW() - INTERVAL '45 days', NOW() - INTERVAL '1 days', 0, NULL),
(17, 15, 17, 26, NOW() - INTERVAL '137 days', NOW() - INTERVAL '9 days', NOW() - INTERVAL '1 days', 0, NULL),
(18, 16, 18, 29, NOW() - INTERVAL '125 days', NOW() - INTERVAL '47 days', NOW() - INTERVAL '1 days', 1, NOW() - INTERVAL '105 days'),
(19, 17, 19, 4, NOW() - INTERVAL '50 days', NOW() - INTERVAL '57 days', NOW() - INTERVAL '0 days', 0, NULL),
(20, 18, 20, 7, NOW() - INTERVAL '162 days', NOW() - INTERVAL '29 days', NOW() - INTERVAL '4 days', 0, NULL),
(21, 25, NULL, 10, NOW() - INTERVAL '108 days', NOW() - INTERVAL '14 days', NOW() - INTERVAL '2 days', 1, NOW() - INTERVAL '109 days'),
(22, 29, NULL, 13, NOW() - INTERVAL '129 days', NOW() - INTERVAL '28 days', NOW() - INTERVAL '1 days', 0, NULL),
(23, 3, NULL, 16, NOW() - INTERVAL '166 days', NOW() - INTERVAL '26 days', NOW() - INTERVAL '4 days', 0, NULL),
(24, 7, NULL, 19, NOW() - INTERVAL '60 days', NOW() - INTERVAL '45 days', NOW() - INTERVAL '1 days', 1, NOW() - INTERVAL '112 days'),
(25, 11, NULL, 22, NOW() - INTERVAL '180 days', NOW() - INTERVAL '29 days', NOW() - INTERVAL '3 days', 0, NULL),
(26, 15, NULL, 25, NOW() - INTERVAL '45 days', NOW() - INTERVAL '52 days', NOW() - INTERVAL '1 days', 0, NULL),
(27, 19, NULL, 28, NOW() - INTERVAL '146 days', NOW() - INTERVAL '47 days', NOW() - INTERVAL '0 days', 1, NOW() - INTERVAL '54 days'),
(28, 23, NULL, 3, NOW() - INTERVAL '145 days', NOW() - INTERVAL '60 days', NOW() - INTERVAL '3 days', 0, NULL),
(29, 27, NULL, 6, NOW() - INTERVAL '107 days', NOW() - INTERVAL '32 days', NOW() - INTERVAL '0 days', 0, NULL),
(30, 1, NULL, 9, NOW() - INTERVAL '70 days', NOW() - INTERVAL '38 days', NOW() - INTERVAL '2 days', 1, NOW() - INTERVAL '76 days');

-- Rezerwacje (30)
INSERT INTO reservation (id, status, reserved_at, expires_at, fulfilled_at, cancelled_at, expired_at, book_id, book_copy_id, user_id) VALUES
(1, 'fulfilled', NOW() - INTERVAL '32 days', NOW() - INTERVAL '4 days', NOW() - INTERVAL '2 days', NULL, NULL, 6, 11, 8),
(2, 'cancelled', NOW() - INTERVAL '21 days', NOW() - INTERVAL '4 days', NULL, NOW() - INTERVAL '1 days', NULL, 14, 16, 13),
(3, 'expired', NOW() - INTERVAL '34 days', NOW() - INTERVAL '5 days', NULL, NULL, NULL, 23, 25, 18),
(4, 'active', NOW() - INTERVAL '23 days', NOW() + INTERVAL '4 days', NULL, NULL, NULL, 2, 4, 23),
(5, 'fulfilled', NOW() - INTERVAL '36 days', NOW() - INTERVAL '2 days', NOW() - INTERVAL '1 days', NULL, NULL, 6, 12, 28),
(6, 'cancelled', NOW() - INTERVAL '17 days', NOW() - INTERVAL '4 days', NULL, NOW() - INTERVAL '3 days', NULL, 30, 30, 5),
(7, 'expired', NOW() - INTERVAL '13 days', NOW() - INTERVAL '2 days', NULL, NULL, NULL, 1, 1, 10),
(8, 'active', NOW() - INTERVAL '16 days', NOW() + INTERVAL '7 days', NULL, NULL, NULL, 1, 2, 15),
(9, 'fulfilled', NOW() - INTERVAL '2 days', NOW() - INTERVAL '4 days', NOW() - INTERVAL '1 days', NULL, NULL, 3, 5, 20),
(10, 'cancelled', NOW() - INTERVAL '12 days', NOW() - INTERVAL '4 days', NULL, NOW() - INTERVAL '3 days', NULL, 3, 6, 25),
(11, 'expired', NOW() - INTERVAL '1 days', NOW() - INTERVAL '1 days', NULL, NULL, NULL, 9, 8, 30),
(12, 'active', NOW() - INTERVAL '17 days', NOW() + INTERVAL '10 days', NULL, NULL, NULL, 10, 10, 7),
(13, 'fulfilled', NOW() - INTERVAL '14 days', NOW() - INTERVAL '0 days', NOW() - INTERVAL '9 days', NULL, NULL, 11, 13, 12),
(14, 'cancelled', NOW() - INTERVAL '20 days', NOW() - INTERVAL '0 days', NULL, NOW() - INTERVAL '5 days', NULL, 13, 15, 17),
(15, 'expired', NOW() - INTERVAL '35 days', NOW() - INTERVAL '4 days', NULL, NULL, NULL, 15, 17, 22),
(16, 'active', NOW() - INTERVAL '8 days', NOW() + INTERVAL '15 days', NULL, NULL, NULL, 17, 19, 27),
(17, 'fulfilled', NOW() - INTERVAL '34 days', NOW() - INTERVAL '1 days', NOW() - INTERVAL '7 days', NULL, NULL, 19, 21, 4),
(18, 'cancelled', NOW() - INTERVAL '31 days', NOW() - INTERVAL '5 days', NULL, NOW() - INTERVAL '6 days', NULL, 21, 23, 9),
(19, 'expired', NOW() - INTERVAL '1 days', NOW() - INTERVAL '2 days', NULL, NULL, NULL, 22, 24, 14),
(20, 'active', NOW() - INTERVAL '36 days', NOW() + INTERVAL '14 days', NULL, NULL, NULL, 24, 26, 19),
(21, 'fulfilled', NOW() - INTERVAL '31 days', NOW() - INTERVAL '2 days', NOW() - INTERVAL '6 days', NULL, NULL, 25, 28, 24),
(22, 'cancelled', NOW() - INTERVAL '14 days', NOW() - INTERVAL '4 days', NULL, NOW() - INTERVAL '2 days', NULL, 13, NULL, 29),
(23, 'expired', NOW() - INTERVAL '39 days', NOW() - INTERVAL '5 days', NULL, NULL, NULL, 19, NULL, 6),
(24, 'active', NOW() - INTERVAL '0 days', NOW() + INTERVAL '15 days', NULL, NULL, NULL, 25, NULL, 11),
(25, 'fulfilled', NOW() - INTERVAL '38 days', NOW() - INTERVAL '4 days', NOW() - INTERVAL '7 days', NULL, NULL, 1, NULL, 16),
(26, 'cancelled', NOW() - INTERVAL '21 days', NOW() - INTERVAL '5 days', NULL, NOW() - INTERVAL '9 days', NULL, 7, NULL, 21),
(27, 'expired', NOW() - INTERVAL '7 days', NOW() - INTERVAL '5 days', NULL, NULL, NULL, 13, NULL, 26),
(28, 'active', NOW() - INTERVAL '3 days', NOW() + INTERVAL '6 days', NULL, NULL, NULL, 19, NULL, 3),
(29, 'fulfilled', NOW() - INTERVAL '29 days', NOW() - INTERVAL '2 days', NOW() - INTERVAL '10 days', NULL, NULL, 25, NULL, 8),
(30, 'cancelled', NOW() - INTERVAL '26 days', NOW() - INTERVAL '2 days', NULL, NOW() - INTERVAL '5 days', NULL, 1, NULL, 13);

-- Kary / grzywny (30)
INSERT INTO fine (id, amount, currency, reason, created_at, paid_at, loan_id) VALUES
(1, 11.61, 'PLN', 'Opłata administracyjna', NOW() - INTERVAL '43 days', NULL, 1),
(2, 40.76, 'PLN', 'Uszkodzenie egzemplarza', NOW() - INTERVAL '23 days', NULL, 2),
(3, 19.74, 'PLN', 'Przetrzymanie', NOW() - INTERVAL '53 days', NULL, 3),
(4, 19.39, 'PLN', 'Zgubienie książki', NOW() - INTERVAL '22 days', NOW() - INTERVAL '27 days', 4),
(5, 28.39, 'PLN', 'Zgubienie książki', NOW() - INTERVAL '8 days', NULL, 5),
(6, 46.16, 'PLN', 'Przetrzymanie', NOW() - INTERVAL '33 days', NULL, 6),
(7, 25.64, 'PLN', 'Zgubienie książki', NOW() - INTERVAL '7 days', NULL, 7),
(8, 47.27, 'PLN', 'Przetrzymanie', NOW() - INTERVAL '75 days', NOW() - INTERVAL '12 days', 8),
(9, 15.63, 'PLN', 'Opłata administracyjna', NOW() - INTERVAL '73 days', NULL, 9),
(10, 38.51, 'PLN', 'Zgubienie książki', NOW() - INTERVAL '31 days', NULL, 10),
(11, 32.69, 'PLN', 'Zgubienie książki', NOW() - INTERVAL '56 days', NULL, 11),
(12, 28.58, 'PLN', 'Zgubienie książki', NOW() - INTERVAL '31 days', NOW() - INTERVAL '30 days', 12),
(13, 34.83, 'PLN', 'Zgubienie książki', NOW() - INTERVAL '43 days', NULL, 13),
(14, 47.79, 'PLN', 'Uszkodzenie egzemplarza', NOW() - INTERVAL '15 days', NULL, 14),
(15, 1.98, 'PLN', 'Opłata administracyjna', NOW() - INTERVAL '16 days', NULL, 15),
(16, 24.39, 'PLN', 'Przetrzymanie', NOW() - INTERVAL '60 days', NOW() - INTERVAL '17 days', 16),
(17, 7.94, 'PLN', 'Zgubienie książki', NOW() - INTERVAL '28 days', NULL, 17),
(18, 30.29, 'PLN', 'Przetrzymanie', NOW() - INTERVAL '59 days', NULL, 18),
(19, 25.7, 'PLN', 'Zgubienie książki', NOW() - INTERVAL '90 days', NULL, 19),
(20, 29.43, 'PLN', 'Przetrzymanie', NOW() - INTERVAL '41 days', NOW() - INTERVAL '23 days', 20),
(21, 19.94, 'PLN', 'Przetrzymanie', NOW() - INTERVAL '32 days', NULL, 21),
(22, 14.97, 'PLN', 'Opłata administracyjna', NOW() - INTERVAL '45 days', NULL, 22),
(23, 21.82, 'PLN', 'Przetrzymanie', NOW() - INTERVAL '63 days', NULL, 23),
(24, 34.01, 'PLN', 'Uszkodzenie egzemplarza', NOW() - INTERVAL '5 days', NOW() - INTERVAL '8 days', 24),
(25, 26.71, 'PLN', 'Uszkodzenie egzemplarza', NOW() - INTERVAL '38 days', NULL, 25),
(26, 25.49, 'PLN', 'Opłata administracyjna', NOW() - INTERVAL '28 days', NULL, 26),
(27, 14.84, 'PLN', 'Przetrzymanie', NOW() - INTERVAL '13 days', NULL, 27),
(28, 22.69, 'PLN', 'Zgubienie książki', NOW() - INTERVAL '24 days', NOW() - INTERVAL '16 days', 28),
(29, 47.1, 'PLN', 'Przetrzymanie', NOW() - INTERVAL '81 days', NULL, 29),
(30, 47.03, 'PLN', 'Opłata administracyjna', NOW() - INTERVAL '57 days', NULL, 30);

-- Ulubione (30)
INSERT INTO favorite (id, user_id, book_id, created_at) VALUES
(1, 4, 9, NOW() - INTERVAL '14 days'),
(2, 5, 17, NOW() - INTERVAL '7 days'),
(3, 6, 25, NOW() - INTERVAL '72 days'),
(4, 7, 3, NOW() - INTERVAL '55 days'),
(5, 8, 11, NOW() - INTERVAL '97 days'),
(6, 9, 19, NOW() - INTERVAL '83 days'),
(7, 10, 27, NOW() - INTERVAL '55 days'),
(8, 11, 5, NOW() - INTERVAL '66 days'),
(9, 12, 13, NOW() - INTERVAL '45 days'),
(10, 13, 21, NOW() - INTERVAL '19 days'),
(11, 14, 29, NOW() - INTERVAL '63 days'),
(12, 15, 7, NOW() - INTERVAL '17 days'),
(13, 16, 15, NOW() - INTERVAL '24 days'),
(14, 17, 23, NOW() - INTERVAL '118 days'),
(15, 18, 1, NOW() - INTERVAL '27 days'),
(16, 19, 9, NOW() - INTERVAL '30 days'),
(17, 20, 17, NOW() - INTERVAL '4 days'),
(18, 21, 25, NOW() - INTERVAL '31 days'),
(19, 22, 3, NOW() - INTERVAL '116 days'),
(20, 23, 11, NOW() - INTERVAL '26 days'),
(21, 24, 19, NOW() - INTERVAL '9 days'),
(22, 25, 27, NOW() - INTERVAL '51 days'),
(23, 26, 5, NOW() - INTERVAL '118 days'),
(24, 27, 13, NOW() - INTERVAL '3 days'),
(25, 28, 21, NOW() - INTERVAL '1 days'),
(26, 29, 29, NOW() - INTERVAL '52 days'),
(27, 30, 7, NOW() - INTERVAL '83 days'),
(28, 3, 15, NOW() - INTERVAL '41 days'),
(29, 4, 23, NOW() - INTERVAL '70 days'),
(30, 5, 1, NOW() - INTERVAL '3 days');

-- Oceny książek (30)
INSERT INTO rating (id, user_id, book_id, rating, review, created_at, updated_at) VALUES
(1, 8, 8, 2, 'Recenzja testowa #1.', NOW() - INTERVAL '76 days', NULL),
(2, 13, 15, 3, 'Recenzja testowa #2.', NOW() - INTERVAL '48 days', NULL),
(3, 18, 22, 4, 'Recenzja testowa #3.', NOW() - INTERVAL '8 days', NOW() - INTERVAL '0 days'),
(4, 23, 29, 5, 'Recenzja testowa #4.', NOW() - INTERVAL '40 days', NULL),
(5, 28, 6, 1, 'Recenzja testowa #5.', NOW() - INTERVAL '93 days', NULL),
(6, 5, 13, 2, 'Recenzja testowa #6.', NOW() - INTERVAL '57 days', NOW() - INTERVAL '6 days'),
(7, 10, 20, 3, 'Recenzja testowa #7.', NOW() - INTERVAL '115 days', NULL),
(8, 15, 27, 4, 'Recenzja testowa #8.', NOW() - INTERVAL '5 days', NULL),
(9, 20, 4, 5, 'Recenzja testowa #9.', NOW() - INTERVAL '11 days', NOW() - INTERVAL '42 days'),
(10, 25, 11, 1, 'Recenzja testowa #10.', NOW() - INTERVAL '18 days', NULL),
(11, 30, 18, 2, 'Recenzja testowa #11.', NOW() - INTERVAL '16 days', NULL),
(12, 7, 25, 3, 'Recenzja testowa #12.', NOW() - INTERVAL '101 days', NOW() - INTERVAL '58 days'),
(13, 12, 2, 4, 'Recenzja testowa #13.', NOW() - INTERVAL '2 days', NULL),
(14, 17, 9, 5, 'Recenzja testowa #14.', NOW() - INTERVAL '37 days', NULL),
(15, 22, 16, 1, 'Recenzja testowa #15.', NOW() - INTERVAL '116 days', NOW() - INTERVAL '27 days'),
(16, 27, 23, 2, 'Recenzja testowa #16.', NOW() - INTERVAL '73 days', NULL),
(17, 4, 30, 3, 'Recenzja testowa #17.', NOW() - INTERVAL '61 days', NULL),
(18, 9, 7, 4, 'Recenzja testowa #18.', NOW() - INTERVAL '33 days', NOW() - INTERVAL '30 days'),
(19, 14, 14, 5, 'Recenzja testowa #19.', NOW() - INTERVAL '107 days', NULL),
(20, 19, 21, 1, 'Recenzja testowa #20.', NOW() - INTERVAL '4 days', NULL),
(21, 24, 28, 2, 'Recenzja testowa #21.', NOW() - INTERVAL '98 days', NOW() - INTERVAL '19 days'),
(22, 29, 5, 3, 'Recenzja testowa #22.', NOW() - INTERVAL '43 days', NULL),
(23, 6, 12, 4, 'Recenzja testowa #23.', NOW() - INTERVAL '66 days', NULL),
(24, 11, 19, 5, 'Recenzja testowa #24.', NOW() - INTERVAL '102 days', NOW() - INTERVAL '30 days'),
(25, 16, 26, 1, 'Recenzja testowa #25.', NOW() - INTERVAL '26 days', NULL),
(26, 21, 3, 2, 'Recenzja testowa #26.', NOW() - INTERVAL '105 days', NULL),
(27, 26, 10, 3, 'Recenzja testowa #27.', NOW() - INTERVAL '77 days', NOW() - INTERVAL '40 days'),
(28, 3, 17, 4, 'Recenzja testowa #28.', NOW() - INTERVAL '67 days', NULL),
(29, 8, 24, 5, 'Recenzja testowa #29.', NOW() - INTERVAL '72 days', NULL),
(30, 13, 1, 1, 'Recenzja testowa #30.', NOW() - INTERVAL '103 days', NOW() - INTERVAL '20 days');

-- Feedback rekomendacji (30)
INSERT INTO recommendation_feedback (id, user_id, book_id, feedback_type, created_at) VALUES
(1, 4, 10, 'dismiss', NOW() - INTERVAL '1 days'),
(2, 5, 19, 'saved', NOW() - INTERVAL '50 days'),
(3, 6, 28, 'not_relevant', NOW() - INTERVAL '82 days'),
(4, 7, 7, 'interested', NOW() - INTERVAL '65 days'),
(5, 8, 16, 'dismiss', NOW() - INTERVAL '55 days'),
(6, 9, 25, 'saved', NOW() - INTERVAL '87 days'),
(7, 10, 4, 'not_relevant', NOW() - INTERVAL '68 days'),
(8, 11, 13, 'interested', NOW() - INTERVAL '81 days'),
(9, 12, 22, 'dismiss', NOW() - INTERVAL '85 days'),
(10, 13, 1, 'saved', NOW() - INTERVAL '76 days'),
(11, 14, 10, 'not_relevant', NOW() - INTERVAL '62 days'),
(12, 15, 19, 'interested', NOW() - INTERVAL '66 days'),
(13, 16, 28, 'dismiss', NOW() - INTERVAL '85 days'),
(14, 17, 7, 'saved', NOW() - INTERVAL '53 days'),
(15, 18, 16, 'not_relevant', NOW() - INTERVAL '47 days'),
(16, 19, 25, 'interested', NOW() - INTERVAL '65 days'),
(17, 20, 4, 'dismiss', NOW() - INTERVAL '4 days'),
(18, 21, 13, 'saved', NOW() - INTERVAL '82 days'),
(19, 22, 22, 'not_relevant', NOW() - INTERVAL '23 days'),
(20, 23, 1, 'interested', NOW() - INTERVAL '10 days'),
(21, 24, 10, 'dismiss', NOW() - INTERVAL '62 days'),
(22, 25, 19, 'saved', NOW() - INTERVAL '84 days'),
(23, 26, 28, 'not_relevant', NOW() - INTERVAL '33 days'),
(24, 27, 7, 'interested', NOW() - INTERVAL '21 days'),
(25, 28, 16, 'dismiss', NOW() - INTERVAL '42 days'),
(26, 29, 25, 'saved', NOW() - INTERVAL '43 days'),
(27, 30, 4, 'not_relevant', NOW() - INTERVAL '70 days'),
(28, 3, 13, 'interested', NOW() - INTERVAL '50 days'),
(29, 4, 22, 'dismiss', NOW() - INTERVAL '9 days'),
(30, 5, 1, 'saved', NOW() - INTERVAL '58 days');

-- Kolekcje kuratorskie (30)
INSERT INTO book_collection (id, name, description, featured, display_order, created_at, updated_at, curated_by_id) VALUES
(1, 'Kolekcja #01', 'Opis kolekcji #01 (dane testowe).', true, 1, NOW() - INTERVAL '198 days', NULL, 2),
(2, 'Kolekcja #02', 'Opis kolekcji #02 (dane testowe).', true, 2, NOW() - INTERVAL '293 days', NULL, 2),
(3, 'Kolekcja #03', 'Opis kolekcji #03 (dane testowe).', true, 3, NOW() - INTERVAL '172 days', NULL, 2),
(4, 'Kolekcja #04', 'Opis kolekcji #04 (dane testowe).', true, 4, NOW() - INTERVAL '8 days', NOW() - INTERVAL '12 days', 2),
(5, 'Kolekcja #05', 'Opis kolekcji #05 (dane testowe).', true, 5, NOW() - INTERVAL '300 days', NULL, 1),
(6, 'Kolekcja #06', 'Opis kolekcji #06 (dane testowe).', false, 6, NOW() - INTERVAL '45 days', NULL, 2),
(7, 'Kolekcja #07', 'Opis kolekcji #07 (dane testowe).', true, 7, NOW() - INTERVAL '321 days', NULL, 2),
(8, 'Kolekcja #08', 'Opis kolekcji #08 (dane testowe).', false, 8, NOW() - INTERVAL '186 days', NOW() - INTERVAL '0 days', 2),
(9, 'Kolekcja #09', 'Opis kolekcji #09 (dane testowe).', false, 9, NOW() - INTERVAL '180 days', NULL, 2),
(10, 'Kolekcja #10', 'Opis kolekcji #10 (dane testowe).', false, 10, NOW() - INTERVAL '117 days', NULL, 1),
(11, 'Kolekcja #11', 'Opis kolekcji #11 (dane testowe).', false, 11, NOW() - INTERVAL '207 days', NULL, 2),
(12, 'Kolekcja #12', 'Opis kolekcji #12 (dane testowe).', false, 12, NOW() - INTERVAL '272 days', NOW() - INTERVAL '32 days', 2),
(13, 'Kolekcja #13', 'Opis kolekcji #13 (dane testowe).', false, 13, NOW() - INTERVAL '30 days', NULL, 2),
(14, 'Kolekcja #14', 'Opis kolekcji #14 (dane testowe).', true, 14, NOW() - INTERVAL '327 days', NULL, 2),
(15, 'Kolekcja #15', 'Opis kolekcji #15 (dane testowe).', false, 15, NOW() - INTERVAL '147 days', NULL, 1),
(16, 'Kolekcja #16', 'Opis kolekcji #16 (dane testowe).', false, 16, NOW() - INTERVAL '253 days', NOW() - INTERVAL '48 days', 2),
(17, 'Kolekcja #17', 'Opis kolekcji #17 (dane testowe).', false, 17, NOW() - INTERVAL '322 days', NULL, 2),
(18, 'Kolekcja #18', 'Opis kolekcji #18 (dane testowe).', false, 18, NOW() - INTERVAL '119 days', NULL, 2),
(19, 'Kolekcja #19', 'Opis kolekcji #19 (dane testowe).', false, 19, NOW() - INTERVAL '278 days', NULL, 2),
(20, 'Kolekcja #20', 'Opis kolekcji #20 (dane testowe).', false, 20, NOW() - INTERVAL '247 days', NOW() - INTERVAL '11 days', 1),
(21, 'Kolekcja #21', 'Opis kolekcji #21 (dane testowe).', true, 21, NOW() - INTERVAL '78 days', NULL, 2),
(22, 'Kolekcja #22', 'Opis kolekcji #22 (dane testowe).', false, 22, NOW() - INTERVAL '274 days', NULL, 2),
(23, 'Kolekcja #23', 'Opis kolekcji #23 (dane testowe).', false, 23, NOW() - INTERVAL '227 days', NULL, 2),
(24, 'Kolekcja #24', 'Opis kolekcji #24 (dane testowe).', false, 24, NOW() - INTERVAL '193 days', NOW() - INTERVAL '48 days', 2),
(25, 'Kolekcja #25', 'Opis kolekcji #25 (dane testowe).', false, 25, NOW() - INTERVAL '236 days', NULL, 1),
(26, 'Kolekcja #26', 'Opis kolekcji #26 (dane testowe).', false, 26, NOW() - INTERVAL '22 days', NULL, 2),
(27, 'Kolekcja #27', 'Opis kolekcji #27 (dane testowe).', false, 27, NOW() - INTERVAL '5 days', NULL, 2),
(28, 'Kolekcja #28', 'Opis kolekcji #28 (dane testowe).', true, 28, NOW() - INTERVAL '68 days', NOW() - INTERVAL '29 days', 2),
(29, 'Kolekcja #29', 'Opis kolekcji #29 (dane testowe).', false, 29, NOW() - INTERVAL '98 days', NULL, 2),
(30, 'Kolekcja #30', 'Opis kolekcji #30 (dane testowe).', false, 30, NOW() - INTERVAL '10 days', NULL, 1);

-- Relacje kolekcja-książki (30)
INSERT INTO collection_books (book_collection_id, book_id) VALUES
(1, 1),
(1, 2),
(2, 3),
(2, 4),
(3, 5),
(3, 6),
(4, 7),
(4, 8),
(5, 9),
(5, 10),
(6, 11),
(6, 12),
(7, 13),
(7, 14),
(8, 15),
(8, 16),
(9, 17),
(9, 18),
(10, 19),
(10, 20),
(11, 21),
(11, 22),
(12, 23),
(12, 24),
(13, 25),
(13, 26),
(14, 27),
(14, 28),
(15, 29),
(15, 30);

-- Tokeny rejestracyjne (30)
INSERT INTO registration_token (id, token, created_at, expires_at, used_at, user_id) VALUES
(1, '3f08aace122ee2368432c1ca23a049bc640bafbf00fdf33a52429f38ba12dbf9', NOW() - INTERVAL '1 days', NOW() + INTERVAL '30 days', NULL, 1),
(2, '0f6bffa9661cb5dd2f3f7b2929f33061f58a7ba7fdd689530b1a306f8ed8f3ec', NOW() - INTERVAL '7 days', NOW() + INTERVAL '24 days', NULL, 2),
(3, 'a2f2b0b588bcc84fbf4d2ac8cc086b6f84de3e00fa3c1ba11e38ac078eb03192', NOW() - INTERVAL '13 days', NOW() + INTERVAL '23 days', NOW() - INTERVAL '2 days', 3),
(4, '0d59e266304dee1d75ac34fa01986a53b8097398a4e7e87b54b8b9732691dc98', NOW() - INTERVAL '5 days', NOW() + INTERVAL '10 days', NULL, 4),
(5, '6fcb1cf1b113a341db0fa49dc95fcb841140e6ef6e05ac4cf9b0a5b22a0f056c', NOW() - INTERVAL '3 days', NOW() + INTERVAL '10 days', NULL, 5),
(6, '47076dea039ec9db94fc55694f6864a1cfe47d4f93e41c010e4521e3378888e5', NOW() - INTERVAL '20 days', NOW() + INTERVAL '27 days', NOW() - INTERVAL '2 days', 6),
(7, 'e7c9583f202a49ecd684b04f6435a3cfa6788f8f541e9c09965a857802757b17', NOW() - INTERVAL '6 days', NOW() + INTERVAL '17 days', NULL, 7),
(8, 'fe1e004b2f1cd6bade61f13fc301ff4f8c5aea1b7b19fe9075a0be3b5706655c', NOW() - INTERVAL '0 days', NOW() + INTERVAL '24 days', NULL, 8),
(9, 'b97607173d82f4f5fc71f828aa26f14cfff17ac6f3f6d4a248fa85be851896d1', NOW() - INTERVAL '11 days', NOW() + INTERVAL '26 days', NOW() - INTERVAL '1 days', 9),
(10, 'c85392400a91d8fa684a3ce008b63f5b6d4d2e758bdfcd2ef1900129a3d0889f', NOW() - INTERVAL '14 days', NOW() + INTERVAL '8 days', NULL, 10),
(11, 'aad2a8e98364da58c70b617575dd4457cd7fcb54164cca8f2faabfeec0300cbb', NOW() - INTERVAL '13 days', NOW() + INTERVAL '8 days', NULL, 11),
(12, 'd6137e5567425e33c104c8b2b0870ed0f67fd271ab9385265fa53ae7627ab6f5', NOW() - INTERVAL '16 days', NOW() + INTERVAL '22 days', NOW() - INTERVAL '3 days', 12),
(13, '084f58700d61d51c29b34e8728c9f7aa5f951cf210370b4ed19f899dfda18397', NOW() - INTERVAL '12 days', NOW() + INTERVAL '18 days', NULL, 13),
(14, '5fd2e112842e93d43743e4ab06839a7db12eea101016777e333970a70fd928a8', NOW() - INTERVAL '6 days', NOW() + INTERVAL '13 days', NULL, 14),
(15, '22d592a0490f32ff825dd9c615b55dfdf58dcc6da586cfeb791498b3fc1fa94c', NOW() - INTERVAL '2 days', NOW() + INTERVAL '29 days', NOW() - INTERVAL '3 days', 15),
(16, '0db30d3b5dece4ba741e952c9b920881f477d99ee1753a0e6c39bc1e13049b8f', NOW() - INTERVAL '1 days', NOW() + INTERVAL '10 days', NULL, 16),
(17, 'c609f445976b15199f16b9c96d94f25c8bd00a8c126a006a18a9e0cf397eb26c', NOW() - INTERVAL '4 days', NOW() + INTERVAL '16 days', NULL, 17),
(18, '29900d175e600f3e95b35be00bbb2e09b659b9e6e9a66e4c15edbdf6fc22b4c3', NOW() - INTERVAL '3 days', NOW() + INTERVAL '5 days', NOW() - INTERVAL '0 days', 18),
(19, '22b9e4e87ea9d3a5518bf9e57aadbc872a604e88c74e3185df57f5f223deff7c', NOW() - INTERVAL '14 days', NOW() + INTERVAL '30 days', NULL, 19),
(20, 'f2d55c1f923e54d0312f292a44c5fb9ffeb6215aa7597060fb09123f5c137ad9', NOW() - INTERVAL '11 days', NOW() + INTERVAL '18 days', NULL, 20),
(21, '17ee7c99491f79b7089ca25d405f2c55891d688051e862fc2521e6c428626410', NOW() - INTERVAL '19 days', NOW() + INTERVAL '1 days', NOW() - INTERVAL '3 days', 21),
(22, '7f93a0d17b597bfe166e702350ef62f10005c9d693a13f77ae0aea26231ed379', NOW() - INTERVAL '16 days', NOW() + INTERVAL '12 days', NULL, 22),
(23, '7c5599d60e8034ad62731291c3e9294d6c2c62dc485f54bd432723e1f4960d48', NOW() - INTERVAL '9 days', NOW() + INTERVAL '12 days', NULL, 23),
(24, 'c45d4cbfa2c59b3e72f430c1380b139179d2168eb364065812ef15ed3f2ae1cc', NOW() - INTERVAL '6 days', NOW() + INTERVAL '13 days', NOW() - INTERVAL '0 days', 24),
(25, 'de4d6372d86186d47cd01ded925003a1b1f2442a9045e646db3ce5275a1b10f9', NOW() - INTERVAL '3 days', NOW() + INTERVAL '17 days', NULL, 25),
(26, '53daa612f7a7d25736e36b049adfd2d438f77310a48b57bb8fbc64330e851399', NOW() - INTERVAL '3 days', NOW() + INTERVAL '19 days', NULL, 26),
(27, 'd7429757a8be3d597805ebb97d820bd7681df8362226c5dee46b7461e3ef5fa2', NOW() - INTERVAL '10 days', NOW() + INTERVAL '24 days', NOW() - INTERVAL '0 days', 27),
(28, 'a1bc27387691db262e963d9926b2b0f37388fdaa5a05efb1639d48a0d3b9004b', NOW() - INTERVAL '6 days', NOW() + INTERVAL '13 days', NULL, 28),
(29, '705bcfe9bf588ab4bfe5fe59ec8fdd790a7345440402472f7a22ac2daeb982ad', NOW() - INTERVAL '5 days', NOW() + INTERVAL '14 days', NULL, 29),
(30, '66f5a4fd238e7da631c173fd3f1f09a5c841cf3ce63a299c8cddd792eed27c98', NOW() - INTERVAL '4 days', NOW() + INTERVAL '29 days', NOW() - INTERVAL '3 days', 30);

-- Ogłoszenia (30)
INSERT INTO announcement (id, title, content, type, status, is_pinned, show_on_homepage, created_at, updated_at, published_at, expires_at, event_at, target_audience, created_by_id) VALUES
(1, 'Ogłoszenie #01', 'Treść ogłoszenia #01 (dane testowe).', 'event', 'draft', true, true, NOW() - INTERVAL '17 days', NOW() - INTERVAL '17 days', NULL, NULL, NOW() + INTERVAL '10 days', '["all"]', 2),
(2, 'Ogłoszenie #02', 'Treść ogłoszenia #02 (dane testowe).', 'maintenance', 'archived', true, true, NOW() - INTERVAL '108 days', NOW() - INTERVAL '108 days', NULL, NULL, NULL, '["all"]', 2),
(3, 'Ogłoszenie #03', 'Treść ogłoszenia #03 (dane testowe).', 'policy', 'published', true, true, NOW() - INTERVAL '110 days', NOW() - INTERVAL '110 days', NOW() - INTERVAL '110 days', NOW() + INTERVAL '10 days', NULL, '["all"]', 2),
(4, 'Ogłoszenie #04', 'Treść ogłoszenia #04 (dane testowe).', 'info', 'draft', false, true, NOW() - INTERVAL '20 days', NOW() - INTERVAL '20 days', NULL, NULL, NULL, '["ROLE_USER"]', 2),
(5, 'Ogłoszenie #05', 'Treść ogłoszenia #05 (dane testowe).', 'event', 'archived', false, true, NOW() - INTERVAL '100 days', NOW() - INTERVAL '100 days', NULL, NULL, NOW() + INTERVAL '13 days', '["all"]', 2),
(6, 'Ogłoszenie #06', 'Treść ogłoszenia #06 (dane testowe).', 'maintenance', 'published', false, true, NOW() - INTERVAL '101 days', NOW() - INTERVAL '101 days', NOW() - INTERVAL '101 days', NOW() + INTERVAL '21 days', NULL, '["ROLE_LIBRARIAN","ROLE_ADMIN"]', 2),
(7, 'Ogłoszenie #07', 'Treść ogłoszenia #07 (dane testowe).', 'policy', 'draft', false, true, NOW() - INTERVAL '42 days', NOW() - INTERVAL '42 days', NULL, NULL, NULL, '["all"]', 1),
(8, 'Ogłoszenie #08', 'Treść ogłoszenia #08 (dane testowe).', 'info', 'archived', false, true, NOW() - INTERVAL '4 days', NOW() - INTERVAL '4 days', NULL, NULL, NULL, '["ROLE_USER"]', 2),
(9, 'Ogłoszenie #09', 'Treść ogłoszenia #09 (dane testowe).', 'event', 'published', false, true, NOW() - INTERVAL '12 days', NOW() - INTERVAL '12 days', NOW() - INTERVAL '12 days', NOW() + INTERVAL '28 days', NOW() + INTERVAL '16 days', '["all"]', 2),
(10, 'Ogłoszenie #10', 'Treść ogłoszenia #10 (dane testowe).', 'maintenance', 'draft', false, true, NOW() - INTERVAL '28 days', NOW() - INTERVAL '28 days', NULL, NULL, NULL, '["all"]', 2),
(11, 'Ogłoszenie #11', 'Treść ogłoszenia #11 (dane testowe).', 'policy', 'archived', false, false, NOW() - INTERVAL '58 days', NOW() - INTERVAL '58 days', NULL, NULL, NULL, '["all"]', 2),
(12, 'Ogłoszenie #12', 'Treść ogłoszenia #12 (dane testowe).', 'info', 'published', false, false, NOW() - INTERVAL '55 days', NOW() - INTERVAL '55 days', NOW() - INTERVAL '55 days', NOW() + INTERVAL '35 days', NULL, '["ROLE_USER"]', 2),
(13, 'Ogłoszenie #13', 'Treść ogłoszenia #13 (dane testowe).', 'event', 'draft', false, false, NOW() - INTERVAL '84 days', NOW() - INTERVAL '84 days', NULL, NULL, NOW() + INTERVAL '19 days', '["all"]', 2),
(14, 'Ogłoszenie #14', 'Treść ogłoszenia #14 (dane testowe).', 'maintenance', 'archived', false, false, NOW() - INTERVAL '51 days', NOW() - INTERVAL '51 days', NULL, NULL, NULL, '["all"]', 1),
(15, 'Ogłoszenie #15', 'Treść ogłoszenia #15 (dane testowe).', 'policy', 'published', false, true, NOW() - INTERVAL '7 days', NOW() - INTERVAL '7 days', NOW() - INTERVAL '7 days', NOW() + INTERVAL '17 days', NULL, '["all"]', 2),
(16, 'Ogłoszenie #16', 'Treść ogłoszenia #16 (dane testowe).', 'info', 'draft', false, false, NOW() - INTERVAL '19 days', NOW() - INTERVAL '19 days', NULL, NULL, NULL, '["ROLE_USER"]', 2),
(17, 'Ogłoszenie #17', 'Treść ogłoszenia #17 (dane testowe).', 'event', 'archived', false, false, NOW() - INTERVAL '14 days', NOW() - INTERVAL '14 days', NULL, NULL, NOW() + INTERVAL '22 days', '["all"]', 2),
(18, 'Ogłoszenie #18', 'Treść ogłoszenia #18 (dane testowe).', 'maintenance', 'published', false, false, NOW() - INTERVAL '59 days', NOW() - INTERVAL '59 days', NOW() - INTERVAL '59 days', NOW() + INTERVAL '21 days', NULL, '["ROLE_LIBRARIAN","ROLE_ADMIN"]', 2),
(19, 'Ogłoszenie #19', 'Treść ogłoszenia #19 (dane testowe).', 'policy', 'draft', false, false, NOW() - INTERVAL '17 days', NOW() - INTERVAL '17 days', NULL, NULL, NULL, '["all"]', 2),
(20, 'Ogłoszenie #20', 'Treść ogłoszenia #20 (dane testowe).', 'info', 'archived', false, true, NOW() - INTERVAL '85 days', NOW() - INTERVAL '85 days', NULL, NULL, NULL, '["ROLE_USER"]', 2),
(21, 'Ogłoszenie #21', 'Treść ogłoszenia #21 (dane testowe).', 'event', 'published', false, false, NOW() - INTERVAL '5 days', NOW() - INTERVAL '5 days', NOW() - INTERVAL '5 days', NOW() + INTERVAL '55 days', NOW() + INTERVAL '25 days', '["all"]', 1),
(22, 'Ogłoszenie #22', 'Treść ogłoszenia #22 (dane testowe).', 'maintenance', 'draft', false, false, NOW() - INTERVAL '56 days', NOW() - INTERVAL '56 days', NULL, NULL, NULL, '["all"]', 2),
(23, 'Ogłoszenie #23', 'Treść ogłoszenia #23 (dane testowe).', 'policy', 'archived', false, false, NOW() - INTERVAL '103 days', NOW() - INTERVAL '103 days', NULL, NULL, NULL, '["all"]', 2),
(24, 'Ogłoszenie #24', 'Treść ogłoszenia #24 (dane testowe).', 'info', 'published', false, false, NOW() - INTERVAL '104 days', NOW() - INTERVAL '104 days', NOW() - INTERVAL '104 days', NOW() + INTERVAL '36 days', NULL, '["ROLE_USER"]', 2),
(25, 'Ogłoszenie #25', 'Treść ogłoszenia #25 (dane testowe).', 'event', 'draft', false, true, NOW() - INTERVAL '104 days', NOW() - INTERVAL '104 days', NULL, NULL, NOW() + INTERVAL '28 days', '["all"]', 2),
(26, 'Ogłoszenie #26', 'Treść ogłoszenia #26 (dane testowe).', 'maintenance', 'archived', false, false, NOW() - INTERVAL '30 days', NOW() - INTERVAL '30 days', NULL, NULL, NULL, '["all"]', 2),
(27, 'Ogłoszenie #27', 'Treść ogłoszenia #27 (dane testowe).', 'policy', 'published', false, false, NOW() - INTERVAL '30 days', NOW() - INTERVAL '30 days', NOW() - INTERVAL '30 days', NOW() + INTERVAL '65 days', NULL, '["all"]', 2),
(28, 'Ogłoszenie #28', 'Treść ogłoszenia #28 (dane testowe).', 'info', 'draft', false, false, NOW() - INTERVAL '43 days', NOW() - INTERVAL '43 days', NULL, NULL, NULL, '["ROLE_USER"]', 1),
(29, 'Ogłoszenie #29', 'Treść ogłoszenia #29 (dane testowe).', 'event', 'archived', false, false, NOW() - INTERVAL '85 days', NOW() - INTERVAL '85 days', NULL, NULL, NOW() + INTERVAL '31 days', '["all"]', 2),
(30, 'Ogłoszenie #30', 'Treść ogłoszenia #30 (dane testowe).', 'maintenance', 'published', false, true, NOW() - INTERVAL '18 days', NOW() - INTERVAL '18 days', NOW() - INTERVAL '18 days', NOW() + INTERVAL '21 days', NULL, '["ROLE_LIBRARIAN","ROLE_ADMIN"]', 2);

-- Logi audytowe (30)
INSERT INTO audit_logs (id, entity_type, entity_id, action, ip_address, old_values, new_values, description, created_at, user_id) VALUES
(1, 'loan', 4, 'UPDATE', '192.168.1.7', '{"sample":"old"}', '{"sample":"new"}', 'Audit log UPDATE dla loan#4.', NOW() - INTERVAL '86 days', 2),
(2, 'reservation', 7, 'DELETE', '192.168.2.14', '{"sample":"old"}', NULL, 'Audit log DELETE dla reservation#7.', NOW() - INTERVAL '1 days', 3),
(3, 'user', 10, 'LOGIN', '192.168.3.21', '{"sample":"old"}', '{"sample":"new"}', 'Audit log LOGIN dla user#10.', NOW() - INTERVAL '37 days', 4),
(4, 'fine', 13, 'LOGOUT', '192.168.4.28', '{"sample":"old"}', '{"sample":"new"}', 'Audit log LOGOUT dla fine#13.', NOW() - INTERVAL '41 days', NULL),
(5, 'announcement', 16, 'CREATE', '192.168.5.35', NULL, '{"sample":"new"}', 'Audit log CREATE dla announcement#16.', NOW() - INTERVAL '85 days', 6),
(6, 'book', 19, 'UPDATE', '192.168.6.42', '{"sample":"old"}', '{"sample":"new"}', 'Audit log UPDATE dla book#19.', NOW() - INTERVAL '51 days', 7),
(7, 'loan', 22, 'DELETE', '192.168.7.49', '{"sample":"old"}', NULL, 'Audit log DELETE dla loan#22.', NOW() - INTERVAL '44 days', 8),
(8, 'reservation', 25, 'LOGIN', '192.168.8.56', '{"sample":"old"}', '{"sample":"new"}', 'Audit log LOGIN dla reservation#25.', NOW() - INTERVAL '100 days', NULL),
(9, 'user', 28, 'LOGOUT', '192.168.9.63', '{"sample":"old"}', '{"sample":"new"}', 'Audit log LOGOUT dla user#28.', NOW() - INTERVAL '29 days', 10),
(10, 'fine', 1, 'CREATE', '192.168.10.70', NULL, '{"sample":"new"}', 'Audit log CREATE dla fine#1.', NOW() - INTERVAL '104 days', 11),
(11, 'announcement', 4, 'UPDATE', '192.168.11.77', '{"sample":"old"}', '{"sample":"new"}', 'Audit log UPDATE dla announcement#4.', NOW() - INTERVAL '7 days', 12),
(12, 'book', 7, 'DELETE', '192.168.12.84', '{"sample":"old"}', NULL, 'Audit log DELETE dla book#7.', NOW() - INTERVAL '7 days', 13),
(13, 'loan', 10, 'LOGIN', '192.168.13.91', '{"sample":"old"}', '{"sample":"new"}', 'Audit log LOGIN dla loan#10.', NOW() - INTERVAL '70 days', 14),
(14, 'reservation', 13, 'LOGOUT', '192.168.14.98', '{"sample":"old"}', '{"sample":"new"}', 'Audit log LOGOUT dla reservation#13.', NOW() - INTERVAL '8 days', 15),
(15, 'user', 16, 'CREATE', '192.168.15.105', NULL, '{"sample":"new"}', 'Audit log CREATE dla user#16.', NOW() - INTERVAL '14 days', 16),
(16, 'fine', 19, 'UPDATE', '192.168.16.112', '{"sample":"old"}', '{"sample":"new"}', 'Audit log UPDATE dla fine#19.', NOW() - INTERVAL '118 days', 17),
(17, 'announcement', 22, 'DELETE', '192.168.17.119', '{"sample":"old"}', NULL, 'Audit log DELETE dla announcement#22.', NOW() - INTERVAL '31 days', 18),
(18, 'book', 25, 'LOGIN', '192.168.18.126', '{"sample":"old"}', '{"sample":"new"}', 'Audit log LOGIN dla book#25.', NOW() - INTERVAL '36 days', 19),
(19, 'loan', 28, 'LOGOUT', '192.168.19.133', '{"sample":"old"}', '{"sample":"new"}', 'Audit log LOGOUT dla loan#28.', NOW() - INTERVAL '30 days', 20),
(20, 'reservation', 1, 'CREATE', '192.168.20.140', NULL, '{"sample":"new"}', 'Audit log CREATE dla reservation#1.', NOW() - INTERVAL '16 days', 21),
(21, 'user', 4, 'UPDATE', '192.168.21.147', '{"sample":"old"}', '{"sample":"new"}', 'Audit log UPDATE dla user#4.', NOW() - INTERVAL '71 days', 22),
(22, 'fine', 7, 'DELETE', '192.168.22.154', '{"sample":"old"}', NULL, 'Audit log DELETE dla fine#7.', NOW() - INTERVAL '101 days', 23),
(23, 'announcement', 10, 'LOGIN', '192.168.23.161', '{"sample":"old"}', '{"sample":"new"}', 'Audit log LOGIN dla announcement#10.', NOW() - INTERVAL '0 days', 24),
(24, 'book', 13, 'LOGOUT', '192.168.24.168', '{"sample":"old"}', '{"sample":"new"}', 'Audit log LOGOUT dla book#13.', NOW() - INTERVAL '100 days', NULL),
(25, 'loan', 16, 'CREATE', '192.168.25.175', NULL, '{"sample":"new"}', 'Audit log CREATE dla loan#16.', NOW() - INTERVAL '113 days', 26),
(26, 'reservation', 19, 'UPDATE', '192.168.26.182', '{"sample":"old"}', '{"sample":"new"}', 'Audit log UPDATE dla reservation#19.', NOW() - INTERVAL '77 days', 27),
(27, 'user', 22, 'DELETE', '192.168.27.189', '{"sample":"old"}', NULL, 'Audit log DELETE dla user#22.', NOW() - INTERVAL '114 days', 28),
(28, 'fine', 25, 'LOGIN', '192.168.28.196', '{"sample":"old"}', '{"sample":"new"}', 'Audit log LOGIN dla fine#25.', NOW() - INTERVAL '98 days', NULL),
(29, 'announcement', 28, 'LOGOUT', '192.168.29.203', '{"sample":"old"}', '{"sample":"new"}', 'Audit log LOGOUT dla announcement#28.', NOW() - INTERVAL '82 days', 30),
(30, 'book', 1, 'CREATE', '192.168.30.210', NULL, '{"sample":"new"}', 'Audit log CREATE dla book#1.', NOW() - INTERVAL '110 days', 1);

-- Rekordy kopii zapasowych (30)
INSERT INTO backup_record (id, file_name, file_path, file_size, status, created_at, initiated_by) VALUES
(1, 'backup_001.sql.gz', '/var/backups/biblioteka/backup_001.sql.gz', 36949144, 'failed', NOW() - INTERVAL '67 days', 'admin'),
(2, 'backup_002.sql.gz', '/var/backups/biblioteka/backup_002.sql.gz', 37757543, 'running', NOW() - INTERVAL '94 days', 'admin'),
(3, 'backup_003.sql.gz', '/var/backups/biblioteka/backup_003.sql.gz', 42516096, 'success', NOW() - INTERVAL '33 days', 'admin'),
(4, 'backup_004.sql.gz', '/var/backups/biblioteka/backup_004.sql.gz', 2729484, 'failed', NOW() - INTERVAL '154 days', 'admin'),
(5, 'backup_005.sql.gz', '/var/backups/biblioteka/backup_005.sql.gz', 23978391, 'running', NOW() - INTERVAL '80 days', 'system'),
(6, 'backup_006.sql.gz', '/var/backups/biblioteka/backup_006.sql.gz', 720555, 'success', NOW() - INTERVAL '89 days', 'system'),
(7, 'backup_007.sql.gz', '/var/backups/biblioteka/backup_007.sql.gz', 694540, 'failed', NOW() - INTERVAL '165 days', 'admin'),
(8, 'backup_008.sql.gz', '/var/backups/biblioteka/backup_008.sql.gz', 5860986, 'running', NOW() - INTERVAL '96 days', 'system'),
(9, 'backup_009.sql.gz', '/var/backups/biblioteka/backup_009.sql.gz', 12825427, 'success', NOW() - INTERVAL '156 days', 'admin'),
(10, 'backup_010.sql.gz', '/var/backups/biblioteka/backup_010.sql.gz', 30344533, 'failed', NOW() - INTERVAL '26 days', 'system'),
(11, 'backup_011.sql.gz', '/var/backups/biblioteka/backup_011.sql.gz', 40519017, 'running', NOW() - INTERVAL '136 days', 'cron'),
(12, 'backup_012.sql.gz', '/var/backups/biblioteka/backup_012.sql.gz', 27281255, 'success', NOW() - INTERVAL '162 days', 'system'),
(13, 'backup_013.sql.gz', '/var/backups/biblioteka/backup_013.sql.gz', 5238455, 'failed', NOW() - INTERVAL '49 days', 'cron'),
(14, 'backup_014.sql.gz', '/var/backups/biblioteka/backup_014.sql.gz', 48972573, 'running', NOW() - INTERVAL '91 days', 'admin'),
(15, 'backup_015.sql.gz', '/var/backups/biblioteka/backup_015.sql.gz', 32770368, 'success', NOW() - INTERVAL '72 days', 'system'),
(16, 'backup_016.sql.gz', '/var/backups/biblioteka/backup_016.sql.gz', 37599503, 'failed', NOW() - INTERVAL '139 days', 'cron'),
(17, 'backup_017.sql.gz', '/var/backups/biblioteka/backup_017.sql.gz', 26490549, 'running', NOW() - INTERVAL '6 days', 'admin'),
(18, 'backup_018.sql.gz', '/var/backups/biblioteka/backup_018.sql.gz', 49403618, 'success', NOW() - INTERVAL '7 days', 'system'),
(19, 'backup_019.sql.gz', '/var/backups/biblioteka/backup_019.sql.gz', 45628426, 'failed', NOW() - INTERVAL '41 days', 'cron'),
(20, 'backup_020.sql.gz', '/var/backups/biblioteka/backup_020.sql.gz', 25029638, 'running', NOW() - INTERVAL '47 days', 'cron'),
(21, 'backup_021.sql.gz', '/var/backups/biblioteka/backup_021.sql.gz', 9652492, 'success', NOW() - INTERVAL '154 days', 'cron'),
(22, 'backup_022.sql.gz', '/var/backups/biblioteka/backup_022.sql.gz', 18649615, 'failed', NOW() - INTERVAL '31 days', 'cron'),
(23, 'backup_023.sql.gz', '/var/backups/biblioteka/backup_023.sql.gz', 24733699, 'running', NOW() - INTERVAL '14 days', 'admin'),
(24, 'backup_024.sql.gz', '/var/backups/biblioteka/backup_024.sql.gz', 24736480, 'success', NOW() - INTERVAL '33 days', 'admin'),
(25, 'backup_025.sql.gz', '/var/backups/biblioteka/backup_025.sql.gz', 28064810, 'failed', NOW() - INTERVAL '23 days', 'system'),
(26, 'backup_026.sql.gz', '/var/backups/biblioteka/backup_026.sql.gz', 17947157, 'running', NOW() - INTERVAL '132 days', 'system'),
(27, 'backup_027.sql.gz', '/var/backups/biblioteka/backup_027.sql.gz', 8511322, 'success', NOW() - INTERVAL '170 days', 'system'),
(28, 'backup_028.sql.gz', '/var/backups/biblioteka/backup_028.sql.gz', 8617041, 'failed', NOW() - INTERVAL '84 days', 'admin'),
(29, 'backup_029.sql.gz', '/var/backups/biblioteka/backup_029.sql.gz', 43314515, 'running', NOW() - INTERVAL '168 days', 'admin'),
(30, 'backup_030.sql.gz', '/var/backups/biblioteka/backup_030.sql.gz', 29994868, 'success', NOW() - INTERVAL '60 days', 'cron');

-- Konfiguracje integracji (3)
INSERT INTO integration_config (id, name, provider, enabled, settings, last_status, last_tested_at, created_at, updated_at) VALUES
(1, 'Integration #01', 'smtp', true, '{"endpoint":"https://example.com","timeout":5}', 'ok', NOW() - INTERVAL '1 day', NOW() - INTERVAL '10 days', NOW() - INTERVAL '1 day'),
(2, 'Integration #02', 'smsapi', false, '{"endpoint":"https://example.com","timeout":5}', 'disabled', NULL, NOW() - INTERVAL '20 days', NOW() - INTERVAL '20 days'),
(3, 'Integration #03', 's3', true, '{"endpoint":"https://example.com","timeout":5}', 'ok', NOW() - INTERVAL '2 days', NOW() - INTERVAL '30 days', NOW() - INTERVAL '2 days');

-- Logi powiadomien (3)
INSERT INTO notification_log (id, type, channel, fingerprint, payload, status, error_message, sent_at, user_id) VALUES
(1, 'reservation_ready', 'email', 'fp-001-email', '{"sample":true}', 'sent', NULL, NOW() - INTERVAL '1 day', 1),
(2, 'fine_created', 'sms', 'fp-002-sms', '{"sample":true}', 'failed', 'Delivery error', NOW() - INTERVAL '2 days', 2),
(3, 'welcome', 'push', 'fp-003-push', '{"sample":true}', 'queued', NULL, NOW() - INTERVAL '3 days', 3);
-- Dostawcy (3)
INSERT INTO supplier (id, name, contact_person, email, phone, address, created_at, updated_at) VALUES
(1, 'Supplier 01', 'Contact 01', 'contact01@supplier.pl', '+48111111111', 'Street 1, City', NOW() - INTERVAL '60 days', NOW() - INTERVAL '10 days'),
(2, 'Supplier 02', 'Contact 02', 'contact02@supplier.pl', '+48222222222', 'Street 2, City', NOW() - INTERVAL '90 days', NOW() - INTERVAL '20 days'),
(3, 'Supplier 03', 'Contact 03', 'contact03@supplier.pl', '+48333333333', 'Street 3, City', NOW() - INTERVAL '120 days', NOW() - INTERVAL '30 days');

-- Budzety akwizycji (3)
INSERT INTO acquisition_budget (id, name, fiscal_year, allocated_amount, spent_amount, currency, created_at, updated_at) VALUES
(1, 'Budget 2025 - 01', '2025', 100000.00, 25000.00, 'PLN', NOW() - INTERVAL '200 days', NOW() - INTERVAL '5 days'),
(2, 'Budget 2025 - 02', '2025', 80000.00, 10000.00, 'PLN', NOW() - INTERVAL '180 days', NOW() - INTERVAL '15 days'),
(3, 'Budget 2026 - 01', '2026', 120000.00, 5000.00, 'PLN', NOW() - INTERVAL '90 days', NOW() - INTERVAL '7 days');

-- Zamowienia akwizycyjne (3)
INSERT INTO acquisition_order (id, reference_number, title, description, items, total_amount, currency, status, created_at, updated_at, ordered_at, expected_at, received_at, cancelled_at, supplier_id, budget_id) VALUES
(1, 'PO-2025-0001', 'Order #01', 'Order desc #01', '[{"isbn":"978-83-7469-627-4","qty":2,"unit_price":70.49}]', 140.98, 'PLN', 'ordered', NOW() - INTERVAL '20 days', NOW() - INTERVAL '20 days', NOW() - INTERVAL '20 days', NOW() + INTERVAL '10 days', NULL, NULL, 1, 1),
(2, 'PO-2025-0002', 'Order #02', 'Order desc #02', '[{"isbn":"978-83-08-06384-6","qty":1,"unit_price":26.69}]', 26.69, 'PLN', 'received', NOW() - INTERVAL '60 days', NOW() - INTERVAL '10 days', NOW() - INTERVAL '60 days', NOW() - INTERVAL '40 days', NOW() - INTERVAL '30 days', NULL, 2, 2),
(3, 'PO-2025-0003', 'Order #03', 'Order desc #03', '[{"isbn":"978-83-7506-127-3","qty":3,"unit_price":24.73}]', 74.19, 'PLN', 'cancelled', NOW() - INTERVAL '90 days', NOW() - INTERVAL '80 days', NOW() - INTERVAL '90 days', NOW() - INTERVAL '60 days', NULL, NOW() - INTERVAL '70 days', 3, 3);

-- Wydatki akwizycyjne (3)
INSERT INTO acquisition_expense (id, amount, currency, description, type, posted_at, budget_id, order_id) VALUES
(1, 4733.99, 'PLN', 'Expense #01', 'shipping', NOW() - INTERVAL '10 days', 1, 1),
(2, 1888.35, 'PLN', 'Expense #02', 'service', NOW() - INTERVAL '20 days', 2, 2),
(3, 614.25, 'PLN', 'Expense #03', 'invoice', NOW() - INTERVAL '5 days', 3, 3);

-- Rekordy selekcji zbiorow (3)
INSERT INTO weeding_record (id, reason, weeded_at, book_copy_id, performed_by_id) VALUES
(1, 'Outdated', NOW() - INTERVAL '10 days', 1, 1),
(2, 'Duplicate', NOW() - INTERVAL '20 days', 2, 2),
(3, 'Damaged', NOW() - INTERVAL '5 days', 3, 3);

-- Resetowanie sekwencji
SELECT setval('app_user_id_seq', (SELECT MAX(id) FROM app_user));
SELECT setval('author_id_seq', (SELECT MAX(id) FROM author));
SELECT setval('category_id_seq', (SELECT MAX(id) FROM category));
SELECT setval('book_id_seq', (SELECT MAX(id) FROM book));
SELECT setval('book_copy_id_seq', (SELECT MAX(id) FROM book_copy));
SELECT setval('book_digital_asset_id_seq', (SELECT MAX(id) FROM book_digital_asset));
SELECT setval('rating_id_seq', (SELECT MAX(id) FROM rating));
SELECT setval('recommendation_feedback_id_seq', (SELECT MAX(id) FROM recommendation_feedback));
SELECT setval('book_collection_id_seq', (SELECT MAX(id) FROM book_collection));
SELECT setval('loan_id_seq', (SELECT MAX(id) FROM loan));
SELECT setval('reservation_id_seq', (SELECT MAX(id) FROM reservation));
SELECT setval('fine_id_seq', (SELECT MAX(id) FROM fine));
SELECT setval('favorite_id_seq', (SELECT MAX(id) FROM favorite));
SELECT setval('registration_token_id_seq', (SELECT MAX(id) FROM registration_token));
SELECT setval('announcement_id_seq', (SELECT MAX(id) FROM announcement));
SELECT setval('audit_logs_id_seq', (SELECT MAX(id) FROM audit_logs));
SELECT setval('backup_record_id_seq', (SELECT MAX(id) FROM backup_record));
SELECT setval('integration_config_id_seq', (SELECT MAX(id) FROM integration_config));
SELECT setval('notification_log_id_seq', (SELECT MAX(id) FROM notification_log));
SELECT setval('supplier_id_seq', (SELECT MAX(id) FROM supplier));
SELECT setval('acquisition_budget_id_seq', (SELECT MAX(id) FROM acquisition_budget));
SELECT setval('acquisition_order_id_seq', (SELECT MAX(id) FROM acquisition_order));
SELECT setval('acquisition_expense_id_seq', (SELECT MAX(id) FROM acquisition_expense));
SELECT setval('weeding_record_id_seq', (SELECT MAX(id) FROM weeding_record));

\echo 'Schema and extended test data created successfully!'
\echo 'Default password for all: password123'
\echo ''
\echo 'Database includes (per table):'
\echo '  - 30 users'
\echo '  - 30 authors'
\echo '  - 30 categories'
\echo '  - 30 books'
\echo '  - 30 book-category links'
\echo '  - 30 book copies'
\echo '  - 30 digital assets'
\echo '  - 30 loans'
\echo '  - 30 reservations'
\echo '  - 30 fines'
\echo '  - 30 favorites'
\echo '  - 30 ratings'
\echo '  - 30 recommendation feedbacks'
\echo '  - 30 curated collections'
\echo '  - 30 collection-book links'
\echo '  - 30 registration tokens'
\echo '  - 30 announcements'
\echo '  - 30 audit logs'
\echo '  - 30 backup records'
\echo '  - 30 integrations'
\echo '  - 30 notification logs'
\echo '  - 30 suppliers'
\echo '  - 30 acquisition budgets'
\echo '  - 30 acquisition orders'
\echo '  - 30 acquisition expenses'
\echo '  - 30 weeding records'
